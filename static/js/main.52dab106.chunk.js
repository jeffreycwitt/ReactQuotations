(window.webpackJsonpadfontes=window.webpackJsonpadfontes||[]).push([[0],{105:function(t,e){var r={handlers:{eg:["<pre>","</pre>"],ptr:['<a href="$rw@target">$@target</a>'],graphic:function(t){var e=new Image;return e.src=this.rw(t.getAttribute("url")),t.hasAttribute("width")&&(e.width=t.getAttribute("width").replace(/[^.0-9]/g,"")),t.hasAttribute("height")&&(e.height=t.getAttribute("height").replace(/[^.0-9]/g,"")),e},list:function(t){if(t.hasAttribute("type")&&"gloss"==t.getAttribute("type")){for(var e=document.createElement("dl"),r=0,a=Array.from(t.children);r<a.length;r++){var o=a[r];if(o.nodeType==Node.ELEMENT_NODE){if("tei-label"==o.localName){var n=document.createElement("dt");n.innerHTML=o.innerHTML,e.appendChild(n)}if("tei-item"==o.localName){var s=document.createElement("dd");s.innerHTML=o.innerHTML,e.appendChild(s)}}}return e}return null},table:function(t){var e=document.createElement("table");if(e.innerHTML=t.innerHTML,"tei-head"==e.firstElementChild.localName){var r=e.firstElementChild;r.remove();var a=document.createElement("caption");a.innerHTML=r.innerHTML,e.appendChild(a)}for(var o=0,n=Array.from(e.querySelectorAll("tei-row"));o<n.length;o++){var s=n[o],i=document.createElement("tr");i.innerHTML=s.innerHTML;for(var c=0,u=Array.from(s.attributes);c<u.length;c++){var p=u[c];i.setAttribute(p.name,p.value)}s.parentElement.replaceChild(i,s)}for(var l=0,h=Array.from(e.querySelectorAll("tei-cell"));l<h.length;l++){var f=h[l],m=document.createElement("td");f.hasAttribute("cols")&&m.setAttribute("colspan",f.getAttribute("cols")),m.innerHTML=f.innerHTML;for(var d=0,T=Array.from(f.attributes);d<T.length;d++){var E=T[d];m.setAttribute(E.name,E.value)}f.parentElement.replaceChild(m,f)}return e},egXML:function(t){var e=document.createElement("pre");return e.innerHTML=this.serialize(t,!0),e}}};t.exports=r},13:function(t,e,r){"use strict";r.r(e),r.d(e,"clearSearchParameters",function(){return s}),r.d(e,"setSearchParameters",function(){return i}),r.d(e,"startSearchWorksFetch",function(){return c}),r.d(e,"completeSearchWorksFetch",function(){return u}),r.d(e,"fetchSearchWorksList",function(){return p}),r.d(e,"startQuotationAuthorsFetch",function(){return l}),r.d(e,"completeQuotationAuthorsFetch",function(){return h}),r.d(e,"fetchQuotationAuthors",function(){return f}),r.d(e,"startExpressionAuthorsFetch",function(){return m}),r.d(e,"completeExpressionAuthorsFetch",function(){return d}),r.d(e,"fetchExpressionAuthors",function(){return T}),r.d(e,"startQuotationWorksListFetch",function(){return E}),r.d(e,"completeQuotationWorksListFetch",function(){return y}),r.d(e,"fetchQuotationWorksList",function(){return O}),r.d(e,"startQuotationWorkPartsFetch",function(){return v}),r.d(e,"completeQuotationWorkPartsFetch",function(){return A}),r.d(e,"fetchQuotationWorkParts",function(){return _}),r.d(e,"startExpressionPartsFetch",function(){return g}),r.d(e,"completeExpressionPartsFetch",function(){return P}),r.d(e,"fetchExpressionParts",function(){return x}),r.d(e,"startQuotationExpressionTypeFetch",function(){return b}),r.d(e,"completeQuotationExpressionTypeFetch",function(){return S}),r.d(e,"fetchQuotationExpressionTypes",function(){return C}),r.d(e,"startExpressionTypeFetch",function(){return I}),r.d(e,"completeExpressionTypeFetch",function(){return q}),r.d(e,"fetchExpressionTypes",function(){return w}),r.d(e,"startWorkGroupsFetch",function(){return R}),r.d(e,"completeWorkGroupsFetch",function(){return k}),r.d(e,"fetchWorkGroups",function(){return N}),r.d(e,"startAuthorTypesFetch",function(){return j}),r.d(e,"completeAuthorTypesFetch",function(){return L}),r.d(e,"fetchAuthorTypes",function(){return Q}),r.d(e,"toggleGraphDisplay",function(){return F}),r.d(e,"startChartFetch",function(){return D}),r.d(e,"completeChartFetch",function(){return M}),r.d(e,"fetchChart",function(){return H}),r.d(e,"toggleImagesDisplay",function(){return W}),r.d(e,"startImagesFetch",function(){return U}),r.d(e,"completeImagesFetch",function(){return G}),r.d(e,"fetchImages",function(){return B}),r.d(e,"addQuotations",function(){return X}),r.d(e,"clearQuotations",function(){return Y}),r.d(e,"startQuotationsFetch",function(){return K}),r.d(e,"clearQuotationsFocus",function(){return V}),r.d(e,"completeQuotationsFetch",function(){return z}),r.d(e,"fetchQuotations",function(){return $}),r.d(e,"changeQuotationsFocus",function(){return J}),r.d(e,"clearFocusedQuotation",function(){return Z}),r.d(e,"createFocusedQuotation",function(){return tt}),r.d(e,"createCanonicalQuotation",function(){return et}),r.d(e,"clearCanonicalQuotation",function(){return rt}),r.d(e,"changeCanonicalQuotationsFocus",function(){return at}),r.d(e,"clearCanonicalQuotationsFocus",function(){return ot}),r.d(e,"clearCanonicalQuotations",function(){return nt}),r.d(e,"startCanonicalQuotationsFetch",function(){return st}),r.d(e,"completeCanonicalQuotationsFetch",function(){return it}),r.d(e,"fetchCanonicalQuotations",function(){return ct}),r.d(e,"changeManifestationQuotationsFocus",function(){return ut}),r.d(e,"clearManifestationQuotationsFocus",function(){return pt}),r.d(e,"clearManifestationQuotations",function(){return lt}),r.d(e,"startManifestationQuotationsFetch",function(){return ht}),r.d(e,"completeManifestationQuotationsFetch",function(){return ft}),r.d(e,"fetchManifestationQuotations",function(){return mt}),r.d(e,"clearParagraph",function(){return dt}),r.d(e,"startParagraphFetch",function(){return Tt}),r.d(e,"completeParagraphFetch",function(){return Et}),r.d(e,"fetchParagraph",function(){return yt}),r.d(e,"startReviewFetch",function(){return Ot}),r.d(e,"completeReviewFetch",function(){return vt}),r.d(e,"fetchReview",function(){return At}),r.d(e,"clearSourceParagraph",function(){return _t}),r.d(e,"startSourceParagraphFetch",function(){return gt}),r.d(e,"completeSourceParagraphFetch",function(){return Pt}),r.d(e,"fetchSourceParagraph",function(){return xt}),r.d(e,"startSourceParagraphReviewFetch",function(){return bt}),r.d(e,"completeSourceParagraphReviewFetch",function(){return St}),r.d(e,"fetchSourceParagraphReview",function(){return Ct}),r.d(e,"toggleFullTextDisplay",function(){return It}),r.d(e,"clearFullText",function(){return qt}),r.d(e,"startFullTextFetch",function(){return wt}),r.d(e,"completeFullTextFetch",function(){return Rt}),r.d(e,"fetchFullText",function(){return kt});var a=r(12),o=r.n(a),n="https://sparql-docker.scta.info/ds/query",s=function(){return{type:"CLEAR_SEARCH_PARAMETERS"}},i=function(t){return{type:"SET_SEARCH_PARAMETERS",searchParameters:t}},c=function(){return{type:"START_SEARCH_WORKS_FETCH"}},u=function(t){return{type:"COMPLETE_SEARCH_WORKS_FETCH",listOfWorks:t}},p=function(){return function(t,e){var r=e(),a="";r.search.searchParameters.workGroup&&(a=["<http://scta.info/resource/"+r.search.searchParameters.workGroup+"> <http://scta.info/property/hasExpression> ?expression ."].join(""));var s="";r.search.searchParameters.expressionAuthorType&&(s=["?expression <http://www.loc.gov/loc.terms/relators/AUT> ?expressionAuthor . ","?expressionAuthor <http://scta.info/property/personType> <http://scta.info/resource/"+r.search.searchParameters.expressionAuthorType+"> ."].join(""));var i="";r.search.searchParameters.expressionAuthor&&(i=["?expression <http://www.loc.gov/loc.terms/relators/AUT> <http://scta.info/resource/"+r.search.searchParameters.expressionAuthor+"> ."].join(""));var p=["SELECT ?type ?expression ?expressionShortId ?expressionTitle ?author ?authorTitle ?workGroup ?workGroupTitle","WHERE { ","?expression a <http://scta.info/resource/expression> .","?expression a ?type .","?expression <http://scta.info/property/level> '1' . ",s,a,i,"?expression <http://scta.info/property/shortId> ?expressionShortId .","?expression <http://scta.info/property/shortId> ?expressionShortId .","?expression <http://purl.org/dc/elements/1.1/title> ?expressionTitle .","?expression <http://www.loc.gov/loc.terms/relators/AUT> ?author . ","?author <http://purl.org/dc/elements/1.1/title> ?authorTitle .","?expression <http://purl.org/dc/terms/isPartOf> ?workGroup .","?workGroup <http://purl.org/dc/elements/1.1/title> ?workGroupTitle .","}","ORDER BY ?expressionTitle"].join("");t(c()),o.a.get(n,{params:{query:p,output:"json"}}).then(function(e){var r=e.data.results.bindings.map(function(t){return{expression:t.expression.value,expressionShortId:t.expressionShortId?t.expressionShortId.value:"",expressionTitle:t.expressionTitle.value,workGroup:t.workGroup?t.workGroup.value:"",workGroupTitle:t.workGroupTitle?t.workGroupTitle.value:"",author:t.author?t.author.value:"",authorTitle:t.author?t.authorTitle.value:"",type:t.type.value}});t(u(r))})}},l=function(){return{type:"START_QUOTATION_AUTHORS_FETCH"}},h=function(t){return{type:"COMPLETE_QUOTATION_AUTHORS_FETCH",authors:t}},f=function(){return function(t,e){var r=e(),a="";r.search.searchParameters.quotationAuthorType&&(a=["?author <http://scta.info/property/personType> <http://scta.info/resource/"+r.search.searchParameters.quotationAuthorType+"> ."].join(""));var s="";(r.search.searchParameters.quotationAuthorDateAfter||r.search.searchParameters.quotationAuthorDateBefore)&&(s="?author <http://scta.info/property/dateOfBirth> ?dateOfBirth .");var i="";r.search.searchParameters.quotationAuthorDateAfter&&(i="FILTER (?dateOfBirth >= '"+r.search.searchParameters.quotationAuthorDateAfter+"').");var c="";r.search.searchParameters.quotationAuthorDateBefore&&(c="FILTER (?dateOfBirth <= '"+r.search.searchParameters.quotationAuthorDateBefore+"').");var u=["SELECT DISTINCT ?author ?authorTitle ?authorShortId ","WHERE { ","?author a <http://scta.info/resource/person> .",a,s,"?resource a <http://scta.info/resource/expression> .","?resource <http://scta.info/property/level> '1' .","?resource <http://www.loc.gov/loc.terms/relators/AUT> ?author .","?author <http://scta.info/property/shortId> ?authorShortId .","?author <http://purl.org/dc/elements/1.1/title> ?authorTitle .",i,c,"}","ORDER BY ?authorTitle"].join("");t(l()),o.a.get(n,{params:{query:u,output:"json"}}).then(function(e){var r=e.data.results.bindings.map(function(t){return{author:t.author.value,authorShortId:t.authorShortId.value,authorTitle:t.authorTitle.value}});t(h(r))})}},m=function(){return{type:"START_EXPRESSION_AUTHORS_FETCH"}},d=function(t){return{type:"COMPLETE_EXPRESSION_AUTHORS_FETCH",authors:t}},T=function(){return function(t,e){var r=e(),a="";r.search.searchParameters.expressionAuthorType&&(a=["?author <http://scta.info/property/personType> <http://scta.info/resource/"+r.search.searchParameters.expressionAuthorType+"> ."].join(""));var s="";(r.search.searchParameters.expressionAuthorDateAfter||r.search.searchParameters.expressionAuthorDateBefore)&&(s="?author <http://scta.info/property/dateOfBirth> ?dateOfBirth .");var i="";r.search.searchParameters.expressionAuthorDateAfter&&(i="FILTER (?dateOfBirth >= '"+r.search.searchParameters.expressionAuthorDateAfter+"').");var c="";r.search.searchParameters.expressionAuthorDateBefore&&(c="FILTER (?dateOfBirth <= '"+r.search.searchParameters.expressionAuthorDateBefore+"').");var u=["SELECT DISTINCT ?author ?authorTitle ?authorShortId ","WHERE { ","?author a <http://scta.info/resource/person> .",a,s,"?resource a <http://scta.info/resource/expression> .","?resource <http://scta.info/property/level> '1' .","?resource <http://www.loc.gov/loc.terms/relators/AUT> ?author .","?author <http://scta.info/property/shortId> ?authorShortId .","?author <http://purl.org/dc/elements/1.1/title> ?authorTitle .",i,c,"}","ORDER BY ?authorTitle"].join("");t(m()),o.a.get(n,{params:{query:u,output:"json"}}).then(function(e){var r=e.data.results.bindings.map(function(t){return{author:t.author.value,authorShortId:t.authorShortId.value,authorTitle:t.authorTitle.value}});t(d(r))})}},E=function(){return{type:"START_QUOTATION_WORKS_LIST_FETCH"}},y=function(t){return{type:"COMPLETE_QUOTATION_WORKS_LIST_FETCH",quotationWorksList:t}},O=function(){return function(t,e){var r=e(),a="";r.search.searchParameters.quotationWorkGroup&&(a=["<http://scta.info/resource/"+r.search.searchParameters.quotationWorkGroup+"> <http://scta.info/property/hasExpression> ?expression ."].join(""));var s="";r.search.searchParameters.quotationAuthor&&(s=["?expression <http://www.loc.gov/loc.terms/relators/AUT> <http://scta.info/resource/"+r.search.searchParameters.quotationAuthor+"> ."].join(""));var i="";r.search.searchParameters.quotationAuthorType&&(i=["?expression <http://www.loc.gov/loc.terms/relators/AUT> ?quotationAuthor . ","?quotationAuthor <http://scta.info/property/personType> <http://scta.info/resource/"+r.search.searchParameters.quotationAuthorType+"> ."].join(""));var c=["SELECT ?type ?expression ?expressionShortId ?expressionTitle ?author ?authorTitle ?workGroup ?workGroupTitle","WHERE { ","?expression a <http://scta.info/resource/expression> .","?expression a ?type .","?expression <http://scta.info/property/level> '1' . ",i,a,s,"?expression <http://scta.info/property/shortId> ?expressionShortId .","?expression <http://purl.org/dc/elements/1.1/title> ?expressionTitle .","OPTIONAL { ","?expression <http://www.loc.gov/loc.terms/relators/AUT> ?author . ","?author <http://purl.org/dc/elements/1.1/title> ?authorTitle .","}","?expression <http://purl.org/dc/terms/isPartOf> ?workGroup .","?workGroup <http://purl.org/dc/elements/1.1/title> ?workGroupTitle .","}","ORDER BY ?expressionTitle"].join("");t(E()),o.a.get(n,{params:{query:c,output:"json"}}).then(function(e){var r=e.data.results.bindings.map(function(t){return{expression:t.expression.value,expressionShortId:t.expressionShortId?t.expressionShortId.value:"",expressionTitle:t.expressionTitle.value,workGroup:t.workGroup?t.workGroup.value:"",workGroupTitle:t.workGroupTitle?t.workGroupTitle.value:"",author:t.author?t.author.value:"",authorTitle:t.author?t.authorTitle.value:"",type:t.type.value}});t(y(r))})}},v=function(){return{type:"START_QUOTATION_WORK_PARTS_FETCH"}},A=function(t){return{type:"COMPLETE_QUOTATION_WORK_PARTS_FETCH",parts:t}},_=function(){return function(t,e){var r=e(),a=["SELECT ?grandparent ?grandparent_title ?parent_title ?parent ?child ?child_title ","WHERE { ","BIND(<http://scta.info/resource/"+(""!=r.search.searchParameters.quotationWorkPart?r.search.searchParameters.quotationWorkPart:""!=r.search.searchParameters.quotationWork?r.search.searchParameters.quotationWork:"")+"> AS ?parent)","OPTIONAL {","?parent <http://purl.org/dc/elements/1.1/title> ?parent_title","}","OPTIONAL {","?parent <http://purl.org/dc/terms/hasPart> ?child .","?child <http://purl.org/dc/elements/1.1/title> ?child_title .","}","OPTIONAL {","?parent <http://purl.org/dc/terms/isPartOf> ?grandparent .","?grandparent <http://purl.org/dc/elements/1.1/title> ?grandparent_title","}","}"].join("");t(v()),o.a.get(n,{params:{query:a,output:"json"}}).then(function(e){var r=e.data.results.bindings.map(function(t){return{grandparent:t.grandparent?t.grandparent.value:"",grandparent_title:t.grandparent_title?t.grandparent_title.value:"",parent:t.parent.value,parent_title:t.parent_title?t.parent_title.value:"",child:t.child?t.child.value:"",child_title:t.child_title?t.child_title.value:""}});t(A(r))})}},g=function(){return{type:"START_EXPRESSION_PARTS_FETCH"}},P=function(t){return{type:"COMPLETE_EXPRESSION_PARTS_FETCH",parts:t}},x=function(){return function(t,e){var r=e(),a="",s=["SELECT ?grandparent ?grandparent_title ?grandparent_level ?parent_title ?parent ?parent_level ?child ?child_level ?child_title ","WHERE { ","BIND(<http://scta.info/resource/"+(a=""!=r.search.searchParameters.expressionPart?r.search.searchParameters.expressionPart:""!=r.search.searchParameters.expressionId?r.search.searchParameters.expressionId:"")+"> AS ?parent)","OPTIONAL {","?parent <http://purl.org/dc/elements/1.1/title> ?parent_title .","?parent <http://scta.info/property/level> ?parent_level .","}","OPTIONAL {","?parent <http://purl.org/dc/terms/hasPart> ?child .","?child <http://purl.org/dc/elements/1.1/title> ?child_title .","?child <http://scta.info/property/level> ?child_level .","}","OPTIONAL {","?parent <http://purl.org/dc/terms/isPartOf> ?grandparent .","?grandparent <http://purl.org/dc/elements/1.1/title> ?grandparent_title .","?grandparent <http://scta.info/property/level> ?grandparent_level .","}","}"].join("");a&&(t(g()),o.a.get(n,{params:{query:s,output:"json"}}).then(function(e){var r=e.data.results.bindings.map(function(t){return{grandparent:t.grandparent?t.grandparent.value:"",grandparent_title:t.grandparent_title?t.grandparent_title.value:"",grandparent_level:t.grandparent_level?t.grandparent_level.value:"",parent:t.parent.value,parent_title:t.parent_title?t.parent_title.value:"",parent_level:t.parent_level?t.parent_level.value:"",child:t.child?t.child.value:"",child_title:t.child_title?t.child_title.value:"",child_level:t.child_level?t.child_level.value:""}});t(P(r))}))}},b=function(){return{type:"START_QUOTATION_EXPRESSION_TYPE_FETCH"}},S=function(t){return{type:"COMPLETE_QUOTATION_EXPRESSION_TYPE_FETCH",quotationExpressionTypes:t}},C=function(){return function(t,e){e();var r=["SELECT ?quotationExpressionType ?quotationExpressionTypeTitle ?quotationExpressionTypeShortId ","WHERE { ","?quotationExpressionType a <http://scta.info/resource/expressionType> .","?quotationExpressionType <http://scta.info/property/shortId> ?quotationExpressionTypeShortId .","?quotationExpressionType <http://purl.org/dc/elements/1.1/title> ?quotationExpressionTypeTitle .","}","ORDER BY ?quotationExpressionTypeTitle"].join("");t(b()),o.a.get(n,{params:{query:r,output:"json"}}).then(function(e){var r=e.data.results.bindings.map(function(t){return{quotationExpressionType:t.quotationExpressionType.value,quotationExpressionTypeShortId:t.quotationExpressionTypeShortId.value,quotationExpressionTypeTitle:t.quotationExpressionTypeTitle.value}});t(S(r))})}},I=function(){return{type:"START_EXPRESSION_TYPE_FETCH"}},q=function(t){return{type:"COMPLETE_EXPRESSION_TYPE_FETCH",expressionTypes:t}},w=function(){return function(t,e){e();var r=["SELECT ?expressionType ?expressionTypeTitle ?expressionTypeShortId ","WHERE { ","?expressionType a <http://scta.info/resource/expressionType> .","?expressionType <http://scta.info/property/shortId> ?expressionTypeShortId .","?expressionType <http://purl.org/dc/elements/1.1/title> ?expressionTypeTitle .","}","ORDER BY ?expressionTypeTitle"].join("");t(I()),o.a.get(n,{params:{query:r,output:"json"}}).then(function(e){var r=e.data.results.bindings.map(function(t){return{expressionType:t.expressionType.value,expressionTypeShortId:t.expressionTypeShortId.value,expressionTypeTitle:t.expressionTypeTitle.value}});t(q(r))})}},R=function(){return{type:"START_WORK_GROUPS_FETCH"}},k=function(t){return{type:"COMPLETE_WORK_GROUPS_FETCH",workGroups:t}},N=function(){return function(t,e){e();var r=["SELECT ?workGroup ?workGroupShortId ?workGroupTitle ","WHERE { ","?workGroup a <http://scta.info/resource/workGroup> .","?workGroup <http://scta.info/property/shortId> ?workGroupShortId .","?workGroup <http://purl.org/dc/elements/1.1/title> ?workGroupTitle .","}","ORDER BY ?workGroupTitle"].join("");t(R()),o.a.get(n,{params:{query:r,output:"json"}}).then(function(e){var r=e.data.results.bindings.map(function(t){return{workGroup:t.workGroup.value,workGroupShortId:t.workGroupShortId.value,workGroupTitle:t.workGroupTitle.value}});t(k(r))})}},j=function(){return{type:"START_AUTHOR_TYPES_FETCH"}},L=function(t){return{type:"COMPLETE_AUTHOR_TYPES_FETCH",authorTypes:t}},Q=function(){return function(t,e){e();var r=["SELECT ?authorType ?authorTypeTitle ?authorTypeShortId ","WHERE { ","?authorType a <http://scta.info/resource/personType> .","?authorType <http://scta.info/property/shortId> ?authorTypeShortId .","?authorType <http://purl.org/dc/elements/1.1/title> ?authorTypeTitle .","}","ORDER BY ?authorTypeTitle"].join("");t(j()),o.a.get(n,{params:{query:r,output:"json"}}).then(function(e){var r=e.data.results.bindings.map(function(t){return{authorType:t.authorType.value,authorTypeShortId:t.authorTypeShortId.value,authorTypeTitle:t.authorTypeTitle.value}});t(L(r))})}},F=function(t){return{type:"TOGGLE_GRAPH_DISPLAY",current:t}},D=function(){return{type:"START_CHART_FETCH"}},M=function(t){return{type:"COMPLETE_CHART_FETCH",count:t}},H=function(){return function(t,e){var r=e(),a=parseInt(r.search.searchParameters.expressionLevel);1===a&&(a=2);var s=r.search.searchParameters.searchText||"",i="";r.search.searchParameters.workGroup&&(i=["?ref <http://purl.org/dc/terms/isPartOf> <http://scta.info/resource/"+r.search.searchParameters.workGroup+">  . "].join(""));var c="";r.search.searchParameters.expressionAuthorType&&(c="?author <http://scta.info/property/personType> <http://scta.info/resource/"+r.search.searchParameters.expressionAuthorType+"> .");var u="";(r.search.searchParameters.expressionAuthorDateAfter||r.search.searchParameters.expressionAuthorDateBefore)&&(u="?author <http://scta.info/property/dateOfBirth> ?expressionAuthorDateOfBirth .");var p="";r.search.searchParameters.expressionAuthorDateAfter&&(p="FILTER (?expressionAuthorDateOfBirth >= '"+r.search.searchParameters.expressionAuthorDateAfter+"').");var l="";r.search.searchParameters.expressionAuthorDateBefore&&(l="FILTER (?expressionAuthorDateOfBirth <= '"+r.search.searchParameters.expressionAuthorDateBefore+"').");var h="";r.search.searchParameters.expressionAuthor&&(h="?ref <http://www.loc.gov/loc.terms/relators/AUT> <http://scta.info/resource/"+r.search.searchParameters.expressionAuthor+"> .");var f=["?ref <http://www.loc.gov/loc.terms/relators/AUT> ?author . ",c,u,h].join(""),m="";r.search.searchParameters.quotationAuthorType&&(m="?quotationAuthor <http://scta.info/property/personType> <http://scta.info/resource/"+(A=r.search.searchParameters.quotationAuthorType)+">  . ");var d="";(r.search.searchParameters.quotationAuthorDateAfter||r.search.searchParameters.quotationAuthorDateBefore)&&(d="?quotationAuthor <http://scta.info/property/dateOfBirth> ?quotationAuthorDateOfBirth .");var T="";r.search.searchParameters.quotationAuthorDateAfter&&(T="FILTER (?quotationAuthorDateOfBirth >= '"+r.search.searchParameters.quotationAuthorDateAfter+"').");var E="";r.search.searchParameters.quotationAuthorDateBefore&&(E="FILTER (?quotationAuthorDateOfBirth <= '"+r.search.searchParameters.quotationAuthorDateBefore+"').");var y="";r.search.searchParameters.quotationAuthor&&(y="?source_toplevel_expression <http://www.loc.gov/loc.terms/relators/AUT> <http://scta.info/resource/"+(A=r.search.searchParameters.quotationAuthor)+">  . ");var O="";if(r.search.searchParameters.quotationAuthorDateAfter||r.search.searchParameters.quotationAuthorDateBefore||r.search.searchParameters.quotationAuthor||r.search.searchParameters.quotationAuthorType)O=["{","?element <http://scta.info/property/isInstanceOf> ?isInstanceOf .","?isInstanceOf <http://scta.info/property/source> ?source .","?source <http://scta.info/property/isPartOfTopLevelExpression> ?source_toplevel_expression . ","?source_toplevel_expression <http://www.loc.gov/loc.terms/relators/AUT> ?quotationAuthor . ",m,d,y,"}","UNION","{","?element <http://scta.info/property/source> ?source .","?source <http://scta.info/property/isPartOfTopLevelExpression> ?source_toplevel_expression . ","?source_toplevel_expression <http://www.loc.gov/loc.terms/relators/AUT> ?quotationAuthor . ",m,d,y,"}"].join("");var v="";if(r.search.searchParameters.quotationWorkGroup){var A=r.search.searchParameters.quotationWorkGroup;v=["{","?element <http://scta.info/property/isInstanceOf> ?isInstanceOf .","?isInstanceOf <http://scta.info/property/source> ?source .","?source <http://scta.info/property/isPartOfTopLevelExpression> ?source_toplevel_expression . ","<http://scta.info/resource/"+r.search.searchParameters.quotationWorkGroup+"> <http://scta.info/property/hasExpression> ?source_toplevel_expression .","}","UNION","{","?element <http://scta.info/property/source> ?source .","?source <http://scta.info/property/isPartOfTopLevelExpression> ?source_toplevel_expression . ","<http://scta.info/resource/"+r.search.searchParameters.quotationWorkGroup+"> <http://scta.info/property/hasExpression> ?source_toplevel_expression .","}"].join("")}var _="";(r.search.searchParameters.quotationWork||r.search.searchParameters.quotationWorkPart)&&(_=["{","?element <http://scta.info/property/isInstanceOf> ?isInstanceOf .","{","\n#check for quotation whose canonical source is a member of the search expression\n","?isInstanceOf  <http://scta.info/property/source> ?source .","?source <http://scta.info/property/isMemberOf> <http://scta.info/resource/"+(A=r.search.searchParameters.quotationWorkPart?r.search.searchParameters.quotationWorkPart:r.search.searchParameters.quotationWork)+"> .","}","UNION","{","\n#check for quotation whose canonical source is search expression\n","?isInstanceOf  <http://scta.info/property/source> <http://scta.info/resource/"+A+"> .","}","}","UNION","{","\n#check for quotation whose source is a member the search expression\n","{","?element <http://scta.info/property/source> ?source .","?source <http://scta.info/property/isMemberOf> <http://scta.info/resource/"+A+"> .","}","UNION","\n#check for quotation whose source is the search expression\n","{","?element <http://scta.info/property/source> <http://scta.info/resource/"+A+"> .","}","}"].join(""));var g="";if(g="structureElementRef"===r.search.searchParameters.structureElementType?["{?element <http://scta.info/property/structureElementType> <http://scta.info/resource/structureElementRef> .}","MINUS","{?element <http://scta.info/property/isReferenceTo> ?isReferenceTo . }"].join(""):"structureElementRefDup"===r.search.searchParameters.structureElementType?"?element <http://scta.info/property/structureElementType> <http://scta.info/resource/structureElementRef> .":"structureElementQuote"===r.search.searchParameters.structureElementType?"?element <http://scta.info/property/structureElementType> <http://scta.info/resource/structureElementQuote> .":"allDup"===r.search.searchParameters.structureElementType?["{?element <http://scta.info/property/structureElementType> <http://scta.info/resource/structureElementQuote> .}","UNION","{?element <http://scta.info/property/structureElementType> <http://scta.info/resource/structureElementRef> . }"].join(""):["{?element <http://scta.info/property/structureElementType> <http://scta.info/resource/structureElementQuote> .}","UNION","{{?element <http://scta.info/property/structureElementType> <http://scta.info/resource/structureElementRef> .}","MINUS","{?element <http://scta.info/property/isReferenceTo> ?isReferenceTo . }","}"].join(""),r.search.searchParameters.expressionId)var P=["SELECT ?ref ?reftitle ?totalOrderNumber (count(?element) as ?count) ","WHERE {","?ref a <http://scta.info/resource/expression> .","?ref <http://scta.info/property/isMemberOf> <http://scta.info/resource/"+r.search.searchParameters.expressionId+"> .","?ref <http://scta.info/property/level> '"+a+"' .","?ref <http://purl.org/dc/elements/1.1/title> ?reftitle .","OPTIONAL {","?ref <http://scta.info/property/totalOrderNumber> ?totalOrderNumber .","}","OPTIONAL {","?element <http://scta.info/property/isMemberOf> ?ref .",g,"?element <http://scta.info/property/structureElementText> ?quotation_text .",O,v,_,"}",E,T,"FILTER (REGEX(STR(?quotation_text), '"+s+"', 'i')) .","}","group by ?ref ?reftitle ?totalOrderNumber ","ORDER BY ?totalOrderNumber "].join("");else P=["SELECT ?ref ?reftitle ?totalOrderNumber (count(?element) as ?count) ","WHERE {","?ref a <http://scta.info/resource/expression> .","?ref <http://scta.info/property/level> '1' .",i,f,"?ref <http://purl.org/dc/elements/1.1/title> ?reftitle .","OPTIONAL {","?ref <http://scta.info/property/totalOrderNumber> ?totalOrderNumber .","}","OPTIONAL {","?element <http://scta.info/property/isMemberOf> ?ref .",g,"?element <http://scta.info/property/structureElementText> ?quotation_text .",O,v,_,"}",E,T,l,p,"FILTER (REGEX(STR(?quotation_text), '"+s+"', 'i')) .","}","group by ?ref ?reftitle ?totalOrderNumber ","ORDER BY ?totalOrderNumber "].join("");t(D()),o.a.get(n,{params:{query:P,output:"json"}}).then(function(e){var r=e.data.results.bindings.map(function(t){return{item:t.ref?t.ref.value:"",title:t.reftitle?t.reftitle.value:"",count:t.count?t.count.value:""}});t(M(r))})}},W=function(t){return{type:"TOGGLE_IMAGES_DISPLAY",current:t}},U=function(){return{type:"START_IMAGES_FETCH"}},G=function(t){return{type:"COMPLETE_IMAGES_FETCH",images:t}},B=function(){return function(t,e){var r=["SELECT ?url ","WHERE { ","<"+e().paragraph.manifestation_id+"> <http://scta.info/property/isOnSurface> ?surface .","?surface <http://scta.info/property/hasISurface> ?isurface .","?isurface <http://scta.info/property/hasCanvas> ?canvas .","?canvas <http://iiif.io/api/presentation/2#hasImageAnnotations> ?anno .","?canvas <http://iiif.io/api/presentation/2#hasImageAnnotations> ?anno .","?anno <http://www.w3.org/1999/02/22-rdf-syntax-ns#first> ?imgres .","?imgres <http://www.w3.org/ns/oa#hasBody> ?body .","?body <http://rdfs.org/sioc/services#has_service> ?url .","}"].join("");t(U()),o.a.get(n,{params:{query:r,output:"json"}}).then(function(e){var r=e.data.results.bindings.map(function(t){return{url:t.url.value}});t(G(r))})}},X=function(t){return{type:"ADD_QUOTATIONS",quotations:t}},Y=function(){return{type:"CLEAR_QUOTATIONS"}},K=function(){return{type:"START_QUOTATIONS_FETCH"}},V=function(){return{type:"CLEAR_QUOTATIONS_FOCUS"}},z=function(t){return{type:"COMPLETE_QUOTATIONS_FETCH",quotations:t}},$=function(){return function(t,e){var r=e(),a=r.search.searchParameters.searchText||"",s="";if(r.search.searchParameters.expressionId||r.search.searchParameters.expressionPart)s=["?quotation <http://scta.info/property/isMemberOf> <http://scta.info/resource/"+(v=r.search.searchParameters.expressionPart?r.search.searchParameters.expressionPart:r.search.searchParameters.expressionId)+"> ."].join("");var i="";r.search.searchParameters.expressionAuthorType&&(i="?author <http://scta.info/property/personType> <http://scta.info/resource/"+r.search.searchParameters.expressionAuthorType+"> .");var c="";(r.search.searchParameters.expressionAuthorDateAfter||r.search.searchParameters.expressionAuthorDateBefore)&&(c="?author <http://scta.info/property/dateOfBirth> ?dateOfBirth .");var u="";r.search.searchParameters.expressionAuthorDateAfter&&(u="FILTER (?dateOfBirth >= '"+r.search.searchParameters.expressionAuthorDateAfter+"').");var p="";r.search.searchParameters.expressionAuthorDateBefore&&(p="FILTER (?dateOfBirth <= '"+r.search.searchParameters.expressionAuthorDateBefore+"').");var l="";r.search.searchParameters.expressionAuthor&&(l="?toplevel_expression <http://www.loc.gov/loc.terms/relators/AUT> <http://scta.info/resource/"+r.search.searchParameters.expressionAuthor+"> .");var h=["?toplevel_expression <http://www.loc.gov/loc.terms/relators/AUT> ?author . ",i,c,l,"?author <http://purl.org/dc/elements/1.1/title> ?author_title . "].join(""),f="";r.search.searchParameters.quotationAuthorType&&(f="?quotationAuthor <http://scta.info/property/personType> <http://scta.info/resource/"+(v=r.search.searchParameters.quotationAuthorType)+">  . ");var m="";(r.search.searchParameters.quotationAuthorDateAfter||r.search.searchParameters.quotationAuthorDateBefore)&&(m="?quotationAuthor <http://scta.info/property/dateOfBirth> ?quotationAuthorDateOfBirth .");var d="";r.search.searchParameters.quotationAuthorDateAfter&&(d="FILTER (?quotationAuthorDateOfBirth >= '"+r.search.searchParameters.quotationAuthorDateAfter+"').");var T="";r.search.searchParameters.quotationAuthorDateBefore&&(T="FILTER (?quotationAuthorDateOfBirth <= '"+r.search.searchParameters.quotationAuthorDateBefore+"').");var E="";r.search.searchParameters.quotationAuthor&&(E="?source_toplevel_expression <http://www.loc.gov/loc.terms/relators/AUT> <http://scta.info/resource/"+(v=r.search.searchParameters.quotationAuthor)+">  . ");var y="";if(r.search.searchParameters.quotationAuthorDateAfter||r.search.searchParameters.quotationAuthorDateBefore||r.search.searchParameters.quotationAuthor||r.search.searchParameters.quotationAuthorType)y=["{","?quotation <http://scta.info/property/isInstanceOf> ?isInstanceOf .","?isInstanceOf <http://scta.info/property/source> ?source .","?source <http://scta.info/property/isPartOfTopLevelExpression> ?source_toplevel_expression . ","?source_toplevel_expression <http://www.loc.gov/loc.terms/relators/AUT> ?quotationAuthor . ",f,m,E,"}","UNION","{","?quotation <http://scta.info/property/source> ?source .","?source <http://scta.info/property/isPartOfTopLevelExpression> ?source_toplevel_expression . ","?source_toplevel_expression <http://www.loc.gov/loc.terms/relators/AUT> ?quotationAuthor . ",f,m,E,"}"].join("");var O="";if(r.search.searchParameters.quotationWorkGroup){var v=r.search.searchParameters.quotationWorkGroup;O=["{","?quotation <http://scta.info/property/isInstanceOf> ?isInstanceOf .","?isInstanceOf <http://scta.info/property/source> ?source .","?source <http://scta.info/property/isPartOfTopLevelExpression> ?source_toplevel_expression . ","<http://scta.info/resource/"+r.search.searchParameters.quotationWorkGroup+"> <http://scta.info/property/hasExpression> ?source_toplevel_expression .","}","UNION","{","?quotation <http://scta.info/property/source> ?source .","?source <http://scta.info/property/isPartOfTopLevelExpression> ?source_toplevel_expression . ","<http://scta.info/resource/"+r.search.searchParameters.quotationWorkGroup+"> <http://scta.info/property/hasExpression> ?source_toplevel_expression .","}"].join("")}var A="";(r.search.searchParameters.quotationWork||r.search.searchParameters.quotationWorkPart)&&(A=["{","?quotation <http://scta.info/property/isInstanceOf> ?isInstanceOf .","{","\n#check for quotation whose canonical source is a member of the search expression\n","?isInstanceOf  <http://scta.info/property/source> ?source .","?source <http://scta.info/property/isMemberOf> <http://scta.info/resource/"+(v=r.search.searchParameters.quotationWorkPart?r.search.searchParameters.quotationWorkPart:r.search.searchParameters.quotationWork)+"> .","}","UNION","{","\n#check for quotation whose canonical source is search expression\n","?isInstanceOf  <http://scta.info/property/source> <http://scta.info/resource/"+v+"> .","}","}","UNION","{","\n#check for quotation whose source is a member the search expression\n","{","?quotation <http://scta.info/property/source> ?source .","?source <http://scta.info/property/isMemberOf> <http://scta.info/resource/"+v+"> .","}","UNION","\n#check for quotation whose source is the search expression\n","{","?quotation <http://scta.info/property/source> <http://scta.info/resource/"+v+"> .","}","}"].join(""));var _="";if(r.search.searchParameters.quotationExpressionType){var g=r.search.searchParameters.quotationExpressionType;_=["{","?quotation <http://scta.info/property/isInstanceOf> ?isInstanceOf .","{","\n#check for quotation whose canonical source is a member an expression with the designated type\n","?isInstanceOf  <http://scta.info/property/source> ?source .","?source <http://scta.info/property/isMemberOf> ?memberOf .","?memberOf <http://scta.info/property/expressionType> <http://scta.info/resource/"+g+"> .","}","UNION","{","\n#check for quotation whose canonical source is has designated type\n","?isInstanceOf  <http://scta.info/property/source> ?source .","?source <http://scta.info/property/expressionType> <http://scta.info/resource/"+g+"> .","}","}","UNION","{","\n#check for quotation whose source is a member the search expression\n","{","?quotation <http://scta.info/property/source> ?source .","?source <http://scta.info/property/isMemberOf> ?memberOf .","?memberOf <http://scta.info/property/expressionType> <http://scta.info/resource/"+g+"> .","}","UNION","\n#check for quotation whose source is the search expression\n","{","?quotation <http://scta.info/property/source> ?source .","?source <http://scta.info/property/expressionType> <http://scta.info/resource/"+g+"> .","}","}"].join("")}var P="";r.search.searchParameters.workGroup&&(P=["<http://scta.info/resource/"+r.search.searchParameters.workGroup+"> <http://scta.info/property/hasExpression> ?toplevel_expression ."].join(""));var x="";r.search.searchParameters.expressionType&&(x=["?quotation <http://scta.info/property/isMemberOf> ?expressionIsmemberOf .","?expressionIsmemberOf <http://scta.info/property/expressionType> <http://scta.info/resource/"+r.search.searchParameters.expressionType+"> ."].join(""));var b="";b="structureElementRef"===r.search.searchParameters.structureElementType?["{?quotation <http://scta.info/property/structureElementType> <http://scta.info/resource/structureElementRef> .}","MINUS","{?quotation <http://scta.info/property/isReferenceTo> ?isReferenceTo . }"].join(""):"structureElementRefDup"===r.search.searchParameters.structureElementType?"?quotation <http://scta.info/property/structureElementType> <http://scta.info/resource/structureElementRef> .":"structureElementQuote"===r.search.searchParameters.structureElementType?"?quotation <http://scta.info/property/structureElementType> <http://scta.info/resource/structureElementQuote> .":"allDup"===r.search.searchParameters.structureElementType?["{?quotation <http://scta.info/property/structureElementType> <http://scta.info/resource/structureElementQuote> .}","UNION","{?quotation <http://scta.info/property/structureElementType> <http://scta.info/resource/structureElementRef> . }"].join(""):["{?quotation <http://scta.info/property/structureElementType> <http://scta.info/resource/structureElementQuote> .}","UNION","{{?quotation <http://scta.info/property/structureElementType> <http://scta.info/resource/structureElementRef> .}","MINUS","{?quotation <http://scta.info/property/isReferenceTo> ?isReferenceTo . }","}"].join("");var S="";if(r.canonicalQuotation)S=["SELECT ?quotation ?isInstanceOf ?quotation_text ?toplevel_expression_title ?author_title ?citation ?ref ?refText ","WHERE {","<"+r.canonicalQuotation.id+"> <http://scta.info/property/hasInstance> ?quotation .","OPTIONAL {","?quotation <http://scta.info/property/isInstanceOf> ?isInstanceOf .","}","OPTIONAL {","?quotation <http://scta.info/property/source> ?source .","}",s,y,O,A,_,"?quotation <http://scta.info/property/structureElementText> ?quotation_text .","?quotation <http://scta.info/property/isPartOfTopLevelExpression> ?toplevel_expression . ",x,P,"?toplevel_expression <http://purl.org/dc/elements/1.1/title> ?toplevel_expression_title . ",h,"OPTIONAL {","?quotation <http://scta.info/property/citation> ?citation . ","}","OPTIONAL {","?ref <http://scta.info/property/isReferenceTo> ?quotation . ","?ref <http://scta.info/property/structureElementText> ?refText . ","}",u,p,d,T,"}","LIMIT 100"].join("");else S=["SELECT ?quotation ?source ?isInstanceOf ?quotation_text ?toplevel_expression_title ?author_title ?citation ?ref ?refText ?refType ","WHERE {",b,"?quotation <http://scta.info/property/structureElementType> ?refType . ","?quotation a <http://scta.info/resource/expression> .","OPTIONAL {","?quotation <http://scta.info/property/isInstanceOf> ?isInstanceOf .","}","OPTIONAL {","?quotation <http://scta.info/property/source> ?source .","}",s,y,O,A,_,"?quotation <http://scta.info/property/structureElementText> ?quotation_text .","?quotation <http://scta.info/property/isPartOfTopLevelExpression> ?toplevel_expression . ",x,P,l,"?toplevel_expression <http://purl.org/dc/elements/1.1/title> ?toplevel_expression_title . ",h,"OPTIONAL {","?quotation <http://scta.info/property/citation> ?citation . ","}","OPTIONAL {","?ref <http://scta.info/property/isReferenceTo> ?quotation . ","?ref <http://scta.info/property/structureElementText> ?refText . ","}",u,p,d,T,"FILTER (REGEX(STR(?quotation_text), '"+a+"', 'i')) .","}","ORDER BY ?quotation_text ","LIMIT 100"].join("");t(K()),o.a.get(n,{params:{query:S,output:"json"}}).then(function(e){var r=e.data.results.bindings;t(z(r))})}},J=function(t){return{type:"CHANGE_QUOTATIONS_FOCUS",id:t}},Z=function(){return{type:"CLEAR_FOCUSED_QUOTATION"}},tt=function(t){return{type:"CREATE_FOCUSED_QUOTATION",quotation:t}},et=function(t){return{type:"CREATE_CANONICAL_QUOTATION",quotation:t}},rt=function(){return{type:"CLEAR_CANONICAL_QUOTATION"}},at=function(t){return{type:"CHANGE_CANONICAL_QUOTATIONS_FOCUS",id:t}},ot=function(){return{type:"CLEAR_CANONICAL_QUOTATIONS_FOCUS"}},nt=function(){return{type:"CLEAR_CANONICAL_QUOTATIONS"}},st=function(){return{type:"START_CANONICAL_QUOTATIONS_FETCH"}},it=function(t){return{type:"COMPLETE_CANONICAL_QUOTATIONS_FETCH",canonicalQuotations:t}},ct=function(){return function(t,e){var r=e(),a=r.search.searchParameters.searchText||"",s="";(r.search.searchParameters.expressionId||r.search.searchParameters.expressionAuthor||r.search.searchParameters.workGroup)&&(s=["?quotation <http://scta.info/property/hasInstance> ?quotationInstance ."].join(""));var i="";(r.search.searchParameters.expressionAuthor||r.search.searchParameters.workGroup)&&(i=["?quotationInstance <http://scta.info/property/isPartOfTopLevelExpression> ?toplevel_expression ."].join(""));var c="";if(r.search.searchParameters.expressionId||r.search.searchParameters.expressionPart)c=["?quotationInstance <http://scta.info/property/isMemberOf> <http://scta.info/resource/"+(_=r.search.searchParameters.expressionPart?r.search.searchParameters.expressionPart:r.search.searchParameters.expressionId)+"> ."].join("");var u="";r.search.searchParameters.expressionAuthorType&&(u="?expressionAuthor <http://scta.info/property/personType> <http://scta.info/resource/"+r.search.searchParameters.expressionAuthorType+">  . ");var p="";(r.search.searchParameters.expressionAuthorDateAfter||r.search.searchParameters.expressionAuthorDateBefore)&&(p="?expressionAuthor <http://scta.info/property/dateOfBirth> ?expressionAuthorDateOfBirth .");var l="";r.search.searchParameters.expressionAuthorDateAfter&&(l="FILTER (?expressionAuthorDateOfBirth >= '"+r.search.searchParameters.expressionAuthorDateAfter+"').");var h="";r.search.searchParameters.expressionAuthorDateBefore&&(h="FILTER (?expressionAuthorDateOfBirth <= '"+r.search.searchParameters.expressionAuthorDateBefore+"').");var f="";r.search.searchParameters.expressionAuthor&&(f="?toplevel_expression <http://www.loc.gov/loc.terms/relators/AUT> <http://scta.info/resource/"+r.search.searchParameters.expressionAuthor+"> .");var m=["?quotation <http://scta.info/property/hasInstance> ?quotationInstance .","?quotationInstance <http://scta.info/property/isPartOfTopLevelExpression> ?toplevel_expression .","?toplevel_expression <http://www.loc.gov/loc.terms/relators/AUT> ?expressionAuthor . ",u,p,f].join(""),d="";r.search.searchParameters.quotationAuthorType&&(d="?quotationAuthor <http://scta.info/property/personType> <http://scta.info/resource/"+r.search.searchParameters.quotationAuthorType+">  . ");var T="";(r.search.searchParameters.quotationAuthorDateAfter||r.search.searchParameters.quotationAuthorDateBefore)&&(T="?quotationAuthor <http://scta.info/property/dateOfBirth> ?quotationAuthorDateOfBirth .");var E="";r.search.searchParameters.quotationAuthorDateAfter&&(E="FILTER (?quotationAuthorDateOfBirth >= '"+r.search.searchParameters.quotationAuthorDateAfter+"').");var y="";r.search.searchParameters.quotationAuthorDateBefore&&(y="FILTER (?quotationAuthorDateOfBirth <= '"+r.search.searchParameters.quotationAuthorDateBefore+"').");var O="";r.search.searchParameters.quotationAuthor&&(O="?source_toplevel_expression <http://www.loc.gov/loc.terms/relators/AUT> <http://scta.info/resource/"+(_=r.search.searchParameters.quotationAuthor)+">  . ");var v=["?quotation <http://scta.info/property/source> ?source .","?source <http://scta.info/property/isPartOfTopLevelExpression> ?source_toplevel_expression . ","?source_toplevel_expression <http://www.loc.gov/loc.terms/relators/AUT> ?quotationAuthor .",d,T,O].join(""),A="";if(r.search.searchParameters.quotationWorkGroup){var _=r.search.searchParameters.quotationWorkGroup;A=["?quotation <http://scta.info/property/source> ?source .","?source <http://scta.info/property/isPartOfTopLevelExpression> ?source_toplevel_expression . ","<http://scta.info/resource/"+r.search.searchParameters.quotationWorkGroup+"> <http://scta.info/property/hasExpression> ?source_toplevel_expression ."].join("")}var g="";(r.search.searchParameters.quotationWork||r.search.searchParameters.quotationWorkPart)&&(g=["{","\n#check for canonical quotation whose source is memberOf the search expression\n","?quotation <http://scta.info/property/source> ?source .","?source <http://scta.info/property/isMemberOf> <http://scta.info/resource/"+(_=r.search.searchParameters.quotationWorkPart?r.search.searchParameters.quotationWorkPart:r.search.searchParameters.quotationWork)+"> . ","}","UNION","\n#check for canonical quotation whose source IS the search expression\n","{","?quotation <http://scta.info/property/source> <http://scta.info/resource/"+_+"> .","}"].join(""));var P="";if(r.search.searchParameters.quotationExpressionType){var x=r.search.searchParameters.quotationExpressionType;P=["{","\n#check for canonical quotation whose source is memberOf the search expression\n","?quotation <http://scta.info/property/source> ?source .","?source <http://scta.info/property/isMemberOf> ?memberOf .","?memberOf <http://scta.info/property/expressionType> <http://scta.info/resource/"+x+"> . ","}","UNION","\n#check for canonical quotation whose source IS the search expression\n","{","?quotation <http://scta.info/property/source> ?source .","?source <http://scta.info/property/expressionType> <http://scta.info/resource/"+x+"> .","}"].join("")}var b="";r.search.searchParameters.workGroup&&(b=["<http://scta.info/resource/"+r.search.searchParameters.workGroup+"> <http://scta.info/property/hasExpression> ?toplevel_expression ."].join(""));var S="";r.search.searchParameters.expressionType&&(S=["?quotation <http://scta.info/property/hasInstance> ?quotationInstance .","?quotationInstance <http://scta.info/property/isMemberOf> ?expressionIsMemberOf .","?expressionIsMemberOf <http://scta.info/property/expressionType> <http://scta.info/resource/"+r.search.searchParameters.expressionType+"> ."].join(""));var C=["SELECT DISTINCT ?quotation ?citation ?quotation_text ","WHERE {","?quotation a <http://scta.info/resource/quotation> .","?quotation <http://scta.info/property/quotation> ?quotation_text .",S,s,i,m,b,v,A,g,P,c,"OPTIONAL { ","?quotation <http://scta.info/property/citation> ?citation .","}",E,y,h,l,"FILTER (REGEX(STR(?quotation_text), '"+a+"', 'i')) .","}","ORDER BY ?citation ","LIMIT 1000"].join("");t(K()),o.a.get(n,{params:{query:C,output:"json"}}).then(function(e){var r=e.data.results.bindings;t(it(r))})}},ut=function(t){return{type:"CHANGE_MANIFESTATION_QUOTATIONS_FOCUS",id:t}},pt=function(){return{type:"CLEAR_MANIFESTATION_QUOTATIONS_FOCUS"}},lt=function(){return{type:"CLEAR_MANIFESTATION_QUOTATIONS"}},ht=function(){return{type:"START_MANIFESTATION_QUOTATIONS_FETCH"}},ft=function(t){return{type:"COMPLETE_MANIFESTATION_QUOTATIONS_FETCH",manifestationQuotations:t}},mt=function(){return function(t,e){var r=e(),a=r.search.searchParameters.searchText||"",s="";void 0!=r.focusedQuotation.id?s=["SELECT ?quotation ?isManifestationOf ?quotation_text ","WHERE {","<"+r.focusedQuotation.id+"> <http://scta.info/property/hasManifestation> ?quotation .","?quotation <http://scta.info/property/isManifestationOf> ?isManifestationOf .","?quotation <http://scta.info/property/structureElementText> ?quotation_text .","}"].join(""):s=["SELECT ?quotation ?isManifestationOf ?quotation_text ","WHERE {","?quotation <http://scta.info/property/structureElementType> <http://scta.info/resource/structureElementQuote> .","?quotation a <http://scta.info/resource/manifestation> .","?quotation <http://scta.info/property/isManifestationOf> ?isManifestationOf .","?quotation <http://scta.info/property/structureElementText> ?quotation_text .","FILTER (REGEX(STR(?quotation_text), '"+a+"', 'i')) .","}","ORDER BY ?isInstanceOf ","LIMIT 100"].join("");t(ht()),o.a.get(n,{params:{query:s,output:"json"}}).then(function(e){var r=e.data.results.bindings;t(ft(r))})}},dt=function(){return{type:"CLEAR_PARAGRAPH"}},Tt=function(){return{type:"START_PARAGRAPH_FETCH"}},Et=function(t){return{type:"COMPLETE_PARAGRAPH_FETCH",paragraph:t}},yt=function(){return function(t,e){var r=e();if(r.focusedQuotation){var a=r.focusedQuotation.id,s="",i=r.focusedQuotation.type;"expression"===i?s=["CONSTRUCT","{","?expression_paragraph <http://scta.info/property/hasDefaultManifestation> ?manifestation_paragraph ;","<http://scta.info/property/hasManifestations> ?manifestations ;","<http://scta.info/property/hasDefaultTranscription> ?transcription_paragraph ;","<http://scta.info/property/isPartOfStructureItem> ?transcription_item ;","<http://scta.info/property/hasDocument> ?transcription_item_file ;","<http://scta.info/property/hasXML> ?xml_url .","}","WHERE { ","<"+a+"> <http://scta.info/property/isPartOfStructureBlock> ?expression_paragraph .","?expression_paragraph <http://scta.info/property/hasCanonicalManifestation> ?manifestation_paragraph .","?expression_paragraph <http://scta.info/property/hasManifestation> ?manifestations .","?manifestation_paragraph <http://scta.info/property/isManifestationOf> ?expression_paragraph .","?manifestation_paragraph <http://scta.info/property/hasCanonicalTranscription> ?transcription_paragraph .","?transcription_paragraph <http://scta.info/property/isPartOfStructureItem> ?transcription_item .","?transcription_item <http://scta.info/property/hasDocument> ?transcription_item_file .","?transcription_paragraph <http://scta.info/property/hasXML> ?xml_url .","}"].join(""):"manifestation"===i&&(s=["CONSTRUCT","{","?expression_paragraph <http://scta.info/property/hasDefaultManifestation> ?manifestation_paragraph ;","<http://scta.info/property/hasManifestations> ?manifestations ;","<http://scta.info/property/hasDefaultTranscription> ?transcription_paragraph ;","<http://scta.info/property/isPartOfStructureItem> ?transcription_item ;","<http://scta.info/property/hasDocument> ?transcription_item_file ;","<http://scta.info/property/hasXML> ?xml_url .","}","WHERE { ","<"+a+"> <http://scta.info/property/isPartOfStructureBlock> ?manifestation_paragraph . ","?manifestation_paragraph <http://scta.info/property/isManifestationOf> ?expression_paragraph .","?expression_paragraph <http://scta.info/property/hasManifestation> ?manifestations .","?manifestation_paragraph <http://scta.info/property/hasCanonicalTranscription> ?transcription_paragraph .","?transcription_paragraph <http://scta.info/property/isPartOfStructureItem> ?transcription_item .","?transcription_item <http://scta.info/property/hasDocument> ?transcription_item_file .","?transcription_paragraph <http://scta.info/property/hasXML> ?xml_url .","}"].join("")),t(Tt()),o.a.get(n,{params:{query:s,output:"json"}}).then(function(e){var r=e.data;r&&o.a.get(r.hasXML).then(function(e){var a={expression_id:r["@id"],manifestations:r.hasManifestations,manifestation_id:r.hasDefaultManifestation,transcription_id:r.hasDefaultTranscription,transcription_item_file:r.hasDocument,paragraph_text:e.data};t(Et(a)),t(At())})}).catch(function(t){console.log("error:",t)})}}},Ot=function(){return{type:"START_REVIEW_FETCH"}},vt=function(t){return{type:"COMPLETE_REVIEW_FETCH",review:t}},At=function(){return function(t,e){var r=e();if(r.paragraph.transcription_item_file){var a="http://dll-review-registry.scta.info/api/v1/reviews?url="+r.paragraph.transcription_item_file+"&society=MAA";t(Ot()),o.a.get(a).then(function(e){var r=e.data[0];t(vt(r))})}}},_t=function(){return{type:"CLEAR_SOURCE_PARAGRAPH"}},gt=function(){return{type:"START_SOURCE_PARAGRAPH_FETCH"}},Pt=function(t){return{type:"COMPLETE_SOURCE_PARAGRAPH_FETCH",sourceParagraph:t}},xt=function(){return function(t,e){var r=e();if(r.focusedQuotation){var a=["CONSTRUCT","{","?expression_paragraph <http://scta.info/property/hasDefaultManifestation> ?manifestation_paragraph ;","<http://scta.info/property/hasManifestations> ?manifestations ;","<http://scta.info/property/hasDefaultTranscription> ?transcription_paragraph ;","<http://scta.info/property/isPartOfStructureItem> ?transcription_item ;","<http://scta.info/property/hasDocument> ?transcription_item_file ;","<http://scta.info/property/hasXML> ?xml_url .","}","WHERE { ","BIND(<"+r.focusedQuotation.source+"> as ?expression_paragraph) .","?expression_paragraph <http://scta.info/property/hasCanonicalManifestation> ?manifestation_paragraph .","?expression_paragraph <http://scta.info/property/hasManifestation> ?manifestations .","?manifestation_paragraph <http://scta.info/property/hasCanonicalTranscription> ?transcription_paragraph .","?transcription_paragraph <http://scta.info/property/isPartOfStructureItem> ?transcription_item .","?transcription_item <http://scta.info/property/hasDocument> ?transcription_item_file .","?transcription_paragraph <http://scta.info/property/hasXML> ?xml_url .","}"].join("");t(gt()),o.a.get(n,{params:{query:a,output:"json"}}).then(function(e){var r=e.data;r&&o.a.get(r.hasXML).then(function(e){var a={expression_id:r["@id"],manifestations:r.hasManifestations,manifestation_id:r.hasDefaultManifestation,transcription_id:r.hasDefaultTranscription,transcription_item_file:r.hasDocument,paragraph_text:e.data};t(Pt(a))})})}}},bt=function(){return{type:"START_SOURCE_PARAGRAPH_REVIEW_FETCH"}},St=function(t){return{type:"COMPLETE_SOURCE_PARAGRAPH_FETCH",review:t}},Ct=function(){return function(t,e){var r=e();if(r.sourceParagraph.transcription_item_file){var a="http://dll-review-registry.scta.info/api/v1/reviews?url="+r.sourceParagraph.transcription_item_file+"&society=MAA";t(gt()),o.a.get(a).then(function(e){var r=e.data[0];t(St(r))})}}},It=function(t){return{type:"TOGGLE_FULL_TEXT_DISPLAY",current:t}},qt=function(){return{type:"CLEAR_FULL_TEXT"}},wt=function(){return{type:"START_FULL_TEXT_FETCH"}},Rt=function(t){return{type:"COMPLETE_FULL_TEXT_FETCH",text:t}},kt=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e,r){var a=r(),s="";if(a.focusedQuotation){var i=a.focusedQuotation.id,c=a.focusedQuotation.type;!0===t?s=["SELECT ?expression_item ?manifestation_item ?transcription_item ?xml_url ?transcription_item_file ","WHERE { ","BIND(<"+a.focusedQuotation.source+"> AS ?expression_block) .","?expression_block <http://scta.info/property/isPartOfStructureItem> ?expression_item .","?expression_item <http://scta.info/property/hasCanonicalManifestation> ?manifestation_item .","?manifestation_item <http://scta.info/property/hasCanonicalTranscription> ?transcription_item .","?transcription_item <http://scta.info/property/hasDocument> ?transcription_item_file .","?transcription_item <http://scta.info/property/hasXML> ?xml_url .","}"].join(""):"expression"===c?s=["SELECT ?expression_item ?manifestation_item ?transcription_item ?xml_url ?transcription_item_file ","WHERE { ","<"+i+"> <http://scta.info/property/isPartOfStructureBlock> ?expression_block .","?expression_block <http://scta.info/property/isPartOfStructureItem> ?expression_item .","?expression_item <http://scta.info/property/hasCanonicalManifestation> ?manifestation_item .","?manifestation_item <http://scta.info/property/hasCanonicalTranscription> ?transcription_item .","?transcription_item <http://scta.info/property/hasDocument> ?transcription_item_file .","?transcription_item <http://scta.info/property/hasXML> ?xml_url .","}"].join(""):"manifestation"===c&&(s=["SELECT ?expression_item ?manifestation_item ?transcription_item ?xml_url ?transcription_item_file ","WHERE { ","<"+i+"> <http://scta.info/property/isPartOfStructureBlock> ?manifestation_block . ","?manifestation_block <http://scta.info/property/isPartOfStructureItem> ?manifestation_item .","?manifestation_item <http://scta.info/property/isManifestationOf> ?expression_item .","?manifestation_item <http://scta.info/property/hasCanonicalTranscription> ?transcription_item .","?transcription_item <http://scta.info/property/hasDocument> ?transcription_item_file .","?transcription_item <http://scta.info/property/hasXML> ?xml_url .","}"].join("")),console.log(s),e(wt()),o.a.get(n,{params:{query:s,output:"json"}}).then(function(t){var r=t.data.results.bindings[0];console.log("full text results",r),o.a.get(r.xml_url.value).then(function(t){var a={expression_id:r.expression_item.value,manifestation_id:r.manifestation_item.value,transcription_id:r.transcription_item.value,transcription_item_file:r.transcription_item_file?r.transcription_item_file.value:"",text:t.data};e(Rt(a)),e(At())})})}}}},160:function(t,e,r){},162:function(t,e,r){"use strict";r.r(e);var a=r(0),o=r.n(a),n=r(32),s=r.n(n),i=r(14),c=r(5),u=r(6),p=r(9),l=r(8),h=r(10),f=r(15),m=r(7),d=r(2),T=r.n(d),E=r(44),y=r.n(E);function O(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}var v=r(14).connect,A=r(13),_=function(t){function e(t){var r;return Object(c.a)(this,e),(r=Object(p.a)(this,Object(l.a)(e).call(this,t))).handleSetSearchText=r.handleSetSearchText.bind(Object(m.a)(r)),r.handleOnShowQuotationsWithoutAssociation=r.handleOnShowQuotationsWithoutAssociation.bind(Object(m.a)(r)),r.handleRunQuery=r.handleRunQuery.bind(Object(m.a)(r)),r.handleGraph=r.handleGraph.bind(Object(m.a)(r)),r.handleClearFilters=r.handleClearFilters.bind(Object(m.a)(r)),r}return Object(h.a)(e,t),Object(u.a)(e,[{key:"handleSetSearchText",value:function(t){var e=this.props,r=e.dispatch,a=(e.search,this.refs.searchText.value),o=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?O(r,!0).forEach(function(e){Object(f.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},this.props.search.searchParameters,{searchText:a});r(A.setSearchParameters(o))}},{key:"handleOnShowQuotationsWithoutAssociation",value:function(t){t.preventDefault();var e=this.props,r=e.dispatch,a=(e.search,this.refs.quotationWorkGroup.value),o=this.refs.quotationExpressionType.value,n=this.refs.quotationWork.value,s=this.refs.quotationWorkPart.value,i=this.refs.expressionId.value,c=this.refs.expressionPart.value?this.refs.expressionPart.value.split("/")[0]:this.refs.expressionPart.value,u=this.refs.expressionPart.value?this.refs.expressionPart.value.split("/")[1]:1,p=this.refs.expressionAuthor.value,l=this.refs.expressionAuthorType.value,h={expressionId:i,expressionPart:c,expressionLevel:u,expressionAuthor:p,quotationAuthor:this.refs.quotationAuthor.value,quotationExpressionType:o,quotationWork:n,quotationWorkPart:s,quotationWorkGroup:a,quotationAuthorType:this.refs.quotationAuthorType.value,expressionAuthorType:l,expressionType:this.refs.expressionType.value,workGroup:this.refs.workGroup.value,quotationAuthorDateAfter:this.refs.quotationAuthorDateAfter.value,quotationAuthorDateBefore:this.refs.quotationAuthorDateBefore.value,expressionAuthorDateAfter:this.refs.expressionAuthorDateAfter.value,expressionAuthorDateBefore:this.refs.expressionAuthorDateBefore.value,structureElementType:this.refs.structureElementType.value};r(A.setSearchParameters(h)),r(A.fetchQuotationWorkParts()),r(A.fetchExpressionParts()),r(A.fetchSearchWorksList()),r(A.fetchQuotationWorksList()),r(A.fetchQuotationAuthors()),r(A.fetchExpressionAuthors())}},{key:"handleRunQuery",value:function(t){t.preventDefault();var e=this.props,r=e.dispatch;e.search;r(A.clearCanonicalQuotation()),r(A.clearFocusedQuotation()),r(A.clearManifestationQuotations()),r(A.clearParagraph()),r(A.clearSourceParagraph()),r(A.fetchCanonicalQuotations()),r(A.fetchQuotations()),r(A.fetchChart())}},{key:"handleClearFilters",value:function(t){t.preventDefault();var e=this.props,r=e.dispatch;e.search;r(A.clearSearchParameters()),r(A.clearCanonicalQuotations()),r(A.clearQuotations()),r(A.fetchQuotationWorkParts()),r(A.fetchExpressionParts()),r(A.fetchQuotationAuthors()),r(A.fetchExpressionAuthors()),r(A.fetchSearchWorksList()),r(A.fetchQuotationWorksList()),r(A.fetchWorkGroups()),r(A.fetchAuthorTypes()),r(A.clearManifestationQuotations()),r(A.clearParagraph()),r(A.clearSourceParagraph()),this.refs.quotationAuthorDateAfter.value="",this.refs.quotationAuthorDateBefore.value="",this.refs.expressionAuthorDateAfter.value="",this.refs.expressionAuthorDateBefore.value="",this.refs.searchText.value=""}},{key:"handleGraph",value:function(t){t.preventDefault(),(0,this.props.dispatch)(A.toggleGraphDisplay(this.props.chart.visible))}},{key:"render",value:function(){var t=this;function e(){return t.props.search.workGroups.map(function(t){return o.a.createElement("option",{value:t.workGroupShortId},t.workGroupTitle)})}return o.a.createElement("div",null,o.a.createElement(T.a,{onSubmit:this.handleOnShowQuotationsWithoutAssociation},o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(y.a,{id:"runQuery",onClick:this.handleRunQuery},"Run Search"),o.a.createElement(y.a,{id:"clearFilter",onClick:this.handleClearFilters},"Clear Filters")),o.a.createElement("div",null,o.a.createElement("p",null,"Search Parameters"),o.a.createElement(T.a.Group,null,o.a.createElement(T.a.Label,null,"Quotation/ReferenceType"),o.a.createElement(T.a.Control,{as:"select",ref:"structureElementType",onChange:this.handleOnShowQuotationsWithoutAssociation},o.a.createElement("option",{value:"structureElementQuote"},"Quotations"),o.a.createElement("option",{value:"structureElementRef"},"References"),o.a.createElement("option",{value:"structureElementRefDup"},"References (With Quotation Overlap)"),o.a.createElement("option",{value:""},"All"),o.a.createElement("option",{value:"allDup"},"All (with quotation overlap)"))),o.a.createElement(T.a.Group,null,o.a.createElement(T.a.Label,null,o.a.createElement(T.a.Control,{as:"input",type:"text",ref:"searchText",placeholder:"search quotation text",onChange:this.handleSetSearchText}))),o.a.createElement("hr",null),o.a.createElement("p",null,"Quotation Parameters"),o.a.createElement(T.a.Group,null,o.a.createElement(T.a.Label,null,"Quotation Author Type"),o.a.createElement(T.a.Control,{as:"select",ref:"quotationAuthorType",onChange:this.handleOnShowQuotationsWithoutAssociation},o.a.createElement("option",{value:""},"All"),t.props.search.authorTypes.map(function(t){return o.a.createElement("option",{value:t.authorTypeShortId},t.authorTypeTitle)}))),o.a.createElement(T.a.Group,null,o.a.createElement(T.a.Label,null,"Quotation Author Birth Date"),o.a.createElement("br",null),"After ",o.a.createElement(T.a.Control,{as:"input",ref:"quotationAuthorDateAfter",onBlur:this.handleOnShowQuotationsWithoutAssociation,placeholder:"e.g. 1200"}),o.a.createElement("br",null),"Before ",o.a.createElement(T.a.Control,{as:"input",ref:"quotationAuthorDateBefore",onBlur:this.handleOnShowQuotationsWithoutAssociation,placeholder:"e.g. 1400"})),o.a.createElement(T.a.Group,null,o.a.createElement(T.a.Label,null,"Quotation Author"),o.a.createElement(T.a.Control,{as:"select",ref:"quotationAuthor",onChange:this.handleOnShowQuotationsWithoutAssociation,value:t.props.search.searchParameters.quotationAuthor},o.a.createElement("option",{value:""},"All"),t.props.search.quotationAuthors.map(function(t){return o.a.createElement("option",{value:t.authorShortId},t.authorTitle)}))),o.a.createElement(T.a.Group,null,o.a.createElement(T.a.Label,null,"Quotation Work Group"),o.a.createElement(T.a.Control,{as:"select",ref:"quotationWorkGroup",onChange:this.handleOnShowQuotationsWithoutAssociation},o.a.createElement("option",{value:""},"All"),e())),o.a.createElement(T.a.Group,null,o.a.createElement(T.a.Label,null,"Quotation Text Type"),o.a.createElement(T.a.Control,{as:"select",ref:"quotationExpressionType",onChange:this.handleOnShowQuotationsWithoutAssociation},o.a.createElement("option",{value:""},"All"),t.props.search.quotationExpressionTypes.map(function(t){return o.a.createElement("option",{value:t.quotationExpressionTypeShortId},t.quotationExpressionTypeTitle)}))),o.a.createElement(T.a.Group,null,o.a.createElement(T.a.Label,null,"Quotation Text Title"),o.a.createElement(T.a.Control,{as:"select",ref:"quotationWork",onChange:this.handleOnShowQuotationsWithoutAssociation,value:t.props.search.searchParameters.quotationWork},o.a.createElement("option",{value:""},"All"),t.props.search.quotationWorksList.map(function(t){var e=t.expressionShortId?t.expressionShortId:t.expression.split("http://scta.info/resource/")[1];return o.a.createElement("option",{value:e},t.expressionTitle)}))),o.a.createElement(T.a.Group,null,o.a.createElement(T.a.Label,null,"Quotation Text Part"),o.a.createElement(T.a.Control,{as:"select",ref:"quotationWorkPart",onChange:this.handleOnShowQuotationsWithoutAssociation,value:t.props.search.searchParameters.quotationWorkPart},o.a.createElement("option",{value:""},"All"),function(){var e=t.props.search.quotationWorkParts;if(e){var r=e[0];if(r){var a=r.grandparent.split("http://scta.info/resource/")[1];if(void 0!=a)return o.a.createElement("option",{value:a},"Up: ",r.grandparent_title)}}}(),function(){var e=t.props.search.quotationWorkParts;if(e){var r=e[0];if(r){var a=r.parent.split("http://scta.info/resource/")[1];return o.a.createElement("option",{value:a},"Current: ",r.parent_title)}}}(),function(){var e=t.props.search.quotationWorkParts;if(e)return e.map(function(t){var e=t.childShortId?t.childShortId:t.child.split("http://scta.info/resource/")[1];if(t.child)return o.a.createElement("option",{value:e},t.child_title)})}())),o.a.createElement("hr",null),o.a.createElement("p",null,"Text Parameters"),o.a.createElement(T.a.Group,null,o.a.createElement(T.a.Label,null,"Text Author Type"),o.a.createElement(T.a.Control,{as:"select",ref:"expressionAuthorType",onChange:this.handleOnShowQuotationsWithoutAssociation},o.a.createElement("option",{value:""},"All"),t.props.search.authorTypes.map(function(t){return o.a.createElement("option",{value:t.authorTypeShortId},t.authorTypeTitle)}))),o.a.createElement(T.a.Group,null,o.a.createElement(T.a.Label,null,"Text Author Birth Date"),o.a.createElement("br",null),"After ",o.a.createElement(T.a.Control,{as:"input",ref:"expressionAuthorDateAfter",onBlur:this.handleOnShowQuotationsWithoutAssociation,placeholder:"e.g. 1200"}),o.a.createElement("br",null),"Before ",o.a.createElement(T.a.Control,{as:"input",ref:"expressionAuthorDateBefore",onBlur:this.handleOnShowQuotationsWithoutAssociation,placeholder:"e.g. 1400"})),o.a.createElement(T.a.Group,null,o.a.createElement(T.a.Label,null,"Text Author"),o.a.createElement(T.a.Control,{as:"select",ref:"expressionAuthor",onChange:this.handleOnShowQuotationsWithoutAssociation,value:t.props.search.searchParameters.expressionAuthor},o.a.createElement("option",{value:""},"All"),t.props.search.expressionAuthors.map(function(t){return o.a.createElement("option",{value:t.authorShortId},t.authorTitle)}))),o.a.createElement(T.a.Group,null,o.a.createElement(T.a.Label,null,"Text Work Group"),o.a.createElement(T.a.Control,{as:"select",ref:"workGroup",onChange:this.handleOnShowQuotationsWithoutAssociation},o.a.createElement("option",{value:""},"All"),e())),o.a.createElement(T.a.Group,null,o.a.createElement(T.a.Label,null,"Text Type"),o.a.createElement(T.a.Control,{as:"select",ref:"expressionType",onChange:this.handleOnShowQuotationsWithoutAssociation},o.a.createElement("option",{value:""},"All"),t.props.search.expressionTypes.map(function(t){return o.a.createElement("option",{value:t.expressionTypeShortId},t.expressionTypeTitle)}))),o.a.createElement(T.a.Group,null,o.a.createElement(T.a.Label,null,"Text Title"),o.a.createElement(T.a.Control,{as:"select",ref:"expressionId",onChange:this.handleOnShowQuotationsWithoutAssociation,value:t.props.search.searchParameters.expressionId},o.a.createElement("option",{value:""},"All"),t.props.search.searchWorks.map(function(t){return o.a.createElement("option",{value:t.expressionShortId},t.expressionTitle)}))),o.a.createElement(T.a.Group,null,o.a.createElement(T.a.Label,null,"Text Part"),o.a.createElement(T.a.Control,{as:"select",ref:"expressionPart",onChange:this.handleOnShowQuotationsWithoutAssociation,value:t.props.search.searchParameters.expressionPart+"/"+t.props.search.searchParameters.expressionLevel},o.a.createElement("option",{value:""},"All"),function(){var e=t.props.search.expressionParts;if(e){var r=e[0];if(r){var a=r.grandparent.split("http://scta.info/resource/")[1];if(void 0!=a)return o.a.createElement("option",{value:a+"/"+r.grandparent_level},"Up: ",r.grandparent_title)}}}(),function(){var e=t.props.search.expressionParts;if(e){var r=e[0];if(r){var a=r.parent.split("http://scta.info/resource/")[1];return o.a.createElement("option",{value:a+"/"+r.parent_level},"Current: ",r.parent_title)}}}(),function(){var e=t.props.search.expressionParts;if(e)return e.map(function(t){var e=t.childShortId?t.childShortId:t.child.split("http://scta.info/resource/")[1];if(t.child)return o.a.createElement("option",{value:e+"/"+t.child_level},t.child_title)})}()))))),o.a.createElement("p",null,o.a.createElement("a",{href:"#",onClick:this.handleGraph},"Toggle Historgram")))}}]),e}(o.a.Component),g=v(function(t){return t})(_),P=r(22),x=r.n(P),b=r(14).connect,S=r(13),C=function(t){function e(t){var r;return Object(c.a)(this,e),(r=Object(p.a)(this,Object(l.a)(e).call(this,t))).handleOnClick=r.handleOnClick.bind(Object(m.a)(r)),r}return Object(h.a)(e,t),Object(u.a)(e,[{key:"handleOnClick",value:function(){var t=this.props,e=t.isInstanceOf,r=t.id,a=t.quotation,o=t.dispatch,n=t.source;o(S.changeQuotationsFocus(this.props.id));var s={id:r,quotation:a,source:n,type:"expression"};if(o(S.createFocusedQuotation(s)),o(S.fetchParagraph()),o(S.fetchSourceParagraph()),o(S.fetchManifestationQuotations()),null!=e){var i=this.props.canonicalQuotations.find(function(t){return t.id===e});if(void 0!=i){o(S.createCanonicalQuotation(i)),o(S.changeCanonicalQuotationsFocus(e));var c=document.getElementById(e).offsetTop;x()("#CanonicalQuotationList").animate({scrollTop:c-10},400);var u=document.getElementById(r).offsetTop;x()("#quotationsList").animate({scrollTop:u-10},400)}else alert("this quotation is assigned to a canonicalQuotation, but either there is an error in the id assigned or a canonicalQuotation record still needs to be made"),o(S.clearCanonicalQuotationsFocus()),o(S.clearCanonicalQuotation())}else o(S.clearCanonicalQuotationsFocus()),o(S.clearCanonicalQuotation())}},{key:"render",value:function(){var t=this.props,e=t.isInstanceOf,r=t.quotation,a=t.className,n=t.title,s=t.author,i=t.id,c=t.refText,u=t.citation;a=null===e?a+" isNotInstance":a;return o.a.createElement("div",{className:"quotation-wrapper"},o.a.createElement("p",{id:i,className:a,onClick:this.handleOnClick},r),o.a.createElement("a",{href:i,target:"_blank",className:"quotation-citation"},s,", ",n),o.a.createElement("a",{href:i,target:"_blank",className:"quotation-citation"},"Original Ref: ",c),o.a.createElement("a",{href:i,target:"_blank",className:"quotation-citation"},"Modern Citation: ",u))}}]),e}(o.a.Component),I=b(function(t){return t})(C),q=function(t){function e(){return Object(c.a)(this,e),Object(p.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props,e=t.quotations,r=t.focusedQuotation;return o.a.createElement("div",null,o.a.createElement("p",null,"List of Expression Quotations"),"fetching"!==this.props.quotations&&o.a.createElement("p",null,"Count ",e.length),"fetching"===e?o.a.createElement("p",null,"Fetching..."):0===e.length?o.a.createElement("p",{className:"container__message"},"No Quotations"):e.map(function(t){var e="";e=r.id&&r.id.includes(t.id)?"quotation focused":"quotation",t.refType;var a=e+" "+t.refType;return o.a.createElement(I,Object.assign({className:a,key:t.id},t))}))}}]),e}(o.a.Component),w=Object(i.connect)(function(t){return t})(q),R=r(14).connect,k=function(t){function e(){return Object(c.a)(this,e),Object(p.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props.focusedQuotation,e=t.quotation,r=t.id;return o.a.createElement("div",{className:"container"},o.a.createElement("p",null,"Focused Quotation: ",e),o.a.createElement("p",null,o.a.createElement("a",{href:r},r)))}}]),e}(o.a.Component),N=(R(function(t){return t})(k),r(14).connect),j=function(t){function e(){return Object(c.a)(this,e),Object(p.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props.canonicalQuotation,e=t?t.quotation:"No canonical quotation id assigned",r=t?t.id:"",a=t?t.citation:"";return o.a.createElement("div",{className:"container"},o.a.createElement("p",null,"Canonical Quotation: ",e),o.a.createElement("p",null,a),o.a.createElement("p",null,o.a.createElement("a",{href:r},r)))}}]),e}(o.a.Component),L=(N(function(t){return t})(j),r(14).connect),Q=r(13),F=function(t){function e(t){var r;return Object(c.a)(this,e),(r=Object(p.a)(this,Object(l.a)(e).call(this,t))).handleOnClick=r.handleOnClick.bind(Object(m.a)(r)),r}return Object(h.a)(e,t),Object(u.a)(e,[{key:"handleOnClick",value:function(){var t=this.props,e=t.id,r=t.quotation,a=t.citation,o=t.dispatch;o(Q.changeCanonicalQuotationsFocus(this.props.id));var n={id:e,quotation:r,citation:a};o(Q.createCanonicalQuotation(n)),o(Q.fetchQuotations()),o(Q.clearQuotationsFocus()),o(Q.clearFocusedQuotation()),o(Q.clearManifestationQuotations()),o(Q.clearParagraph());var s=document.getElementById(e).offsetTop;x()("#CanonicalQuotationList").animate({scrollTop:s-10},400)}},{key:"render",value:function(){var t=this.props,e=t.id,r=t.quotation,a=t.className,n=t.citation;return o.a.createElement("div",{className:"quotation-wrapper"},o.a.createElement("p",{id:e,className:a,onClick:this.handleOnClick},r),o.a.createElement("a",{href:e,target:"_blank",className:"quotation-citation"},n))}}]),e}(o.a.Component),D=L()(F),M=r(13),H=function(t){function e(t){var r;return Object(c.a)(this,e),(r=Object(p.a)(this,Object(l.a)(e).call(this,t))).handleOnShowQuotationsWithoutAssociation=r.handleOnShowQuotationsWithoutAssociation.bind(Object(m.a)(r)),r}return Object(h.a)(e,t),Object(u.a)(e,[{key:"handleOnShowQuotationsWithoutAssociation",value:function(t){t.preventDefault();var e=this.props.dispatch,r=this.refs.searchText.value;e(M.clearCanonicalQuotation()),e(M.clearFocusedQuotation()),e(M.clearParagraph()),e(M.fetchCanonicalQuotations(r)),e(M.fetchQuotations(r))}},{key:"render",value:function(){var t=this.props.canonicalQuotations;return o.a.createElement("div",null,o.a.createElement("p",null,"List of Canonical Quotations"),o.a.createElement("p",null,"Count ",t.length),0===t.length?o.a.createElement("p",{className:"container__message"},"No Quotations"):t.map(function(t){var e=t.focused?"quotation focused":"quotation";return o.a.createElement(D,Object.assign({className:e,key:t.id},t))}))}}]),e}(o.a.Component),W=(Object(i.connect)(function(t){return t})(H),r(14).connect),U=r(13),G=function(t){function e(t){var r;return Object(c.a)(this,e),(r=Object(p.a)(this,Object(l.a)(e).call(this,t))).handleOnClick=r.handleOnClick.bind(Object(m.a)(r)),r}return Object(h.a)(e,t),Object(u.a)(e,[{key:"handleOnClick",value:function(){var t=this.props,e=t.isManifestationOf,r=t.id,a=t.quotation,o=t.dispatch,n={id:r,quotation:a,type:"manifestation"};o(U.createFocusedQuotation(n)),o(U.changeManifestationQuotationsFocus(r)),o(U.fetchParagraph());var s=document.getElementById(r).offsetTop;if(x()("#ManifestationQuotationsList").animate({scrollTop:s-10},400),null!=e){var i=this.props.quotations.find(function(t){return t.id===e});if(void 0!=i){o(U.changeQuotationsFocus(e));s=document.getElementById(e).offsetTop;x()("#quotationsList").animate({scrollTop:s-10},400);var c=i.isInstanceOf;if(null!=c){var u=this.props.canonicalQuotations.find(function(t){return t.id===c});if(void 0!=u){o(U.createCanonicalQuotation(u)),o(U.changeCanonicalQuotationsFocus(c));s=document.getElementById(c).offsetTop;x()("#CanonicalQuotationList").animate({scrollTop:s-10},400)}else o(U.clearCanonicalQuotationsFocus()),o(U.clearCanonicalQuotation())}}else o(U.clearQuotationsFocus()),o(U.clearCanonicalQuotation())}else o(U.clearQuotationsFocus()),o(U.clearCanonicalQuotationsFocus()),o(U.clearCanonicalQuotation())}},{key:"render",value:function(){var t=this.props,e=t.id,r=t.quotation,a=t.className;return o.a.createElement("p",{id:e,className:a,onClick:this.handleOnClick},r)}}]),e}(o.a.Component),B=W(function(t){return t})(G),X=(r(13),function(t){function e(){return Object(c.a)(this,e),Object(p.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props.manifestationQuotations;return o.a.createElement("div",null,o.a.createElement("p",null,"List of Manifestation Quotations"),o.a.createElement("p",null,"Count ",t.length),0===t.length?o.a.createElement("p",{className:"container__message"},"No Quotations"):t.map(function(t){var e=t.focused?"quotation focused":"quotation";return o.a.createElement(B,Object.assign({className:e,key:t.id},t))}))}}]),e}(o.a.Component)),Y=Object(i.connect)(function(t){return t})(X),K=r(30),V=r(33),z=r.n(V),$=r(67),J=r.n($),Z=r(14).connect,tt=r(13),et=function(t){function e(t){var r;return Object(c.a)(this,e),(r=Object(p.a)(this,Object(l.a)(e).call(this,t))).handleShowImages=r.handleShowImages.bind(Object(m.a)(r)),r.handleImageWrapperWraperClick=r.handleImageWrapperWraperClick.bind(Object(m.a)(r)),r.handleShowFullText=r.handleShowFullText.bind(Object(m.a)(r)),r.runQueryForSource=r.runQueryForSource.bind(Object(m.a)(r)),r.addTEICustom=r.addTEICustom.bind(Object(m.a)(r)),r.handleClearFilters=r.handleClearFilters,r.state={imageSize:"200",imageFocus:!1},r}return Object(h.a)(e,t),Object(u.a)(e,[{key:"handleImageWrapperWraperClick",value:function(){this.setState(function(t){return{imageSize:"200"===t.imageSize?"725":"200",imageFocus:!t.imageFocus}})}},{key:"handleShowImages",value:function(t){t.preventDefault();var e=this.props.dispatch;e(tt.fetchImages()),e(tt.toggleImagesDisplay(this.props.images.visible))}},{key:"handleShowFullText",value:function(t){t.preventDefault();var e=this.props.dispatch;"source"===this.props.type?e(tt.fetchFullText(!0)):e(tt.fetchFullText(!1)),e(tt.toggleImagesDisplay(!0)),e(tt.toggleFullTextDisplay(this.props.fullText.visible))}},{key:"componentDidMount",value:function(t){this.addTEICustom()}},{key:"componentDidUpdate",value:function(t){this.addTEICustom()}},{key:"addTEICustom",value:function(){var t=this,e=new K.default,r={};if((r="source"===this.props.type?this.props.sourceParagraph:this.props.paragraph).paragraph_text)e.makeHTML5(r.paragraph_text,function(e){if(t.props.focusedQuotation.id){var r=t.props.focusedQuotation.id.split("/").pop();e.querySelector("#"+r)&&e.querySelector("#"+r).setAttribute("class","highlighted"),t.refs.text.replaceChild(e,t.refs.text.childNodes[0])}});else{var a=document.createTextNode("");t.refs.text.replaceChild(a,t.refs.text.childNodes[0])}}},{key:"runQueryForSource",value:function(t){var e=this.props,r=e.dispatch,a=(e.search,{quotationWorkPart:t});this.handleClearFilters(),r(tt.setSearchParameters(a)),r(tt.fetchQuotationWorkParts()),r(tt.fetchQuotations()),r(tt.fetchChart())}},{key:"handleClearFilters",value:function(t){var e=this.props,r=e.dispatch;e.search;r(tt.clearSearchParameters()),r(tt.clearCanonicalQuotations()),r(tt.clearQuotations()),r(tt.fetchQuotationWorkParts()),r(tt.fetchExpressionParts()),r(tt.fetchQuotationAuthors()),r(tt.fetchExpressionAuthors()),r(tt.fetchSearchWorksList()),r(tt.fetchQuotationWorksList()),r(tt.fetchWorkGroups()),r(tt.fetchAuthorTypes()),r(tt.clearManifestationQuotations())}},{key:"render",value:function(){var t=this,e=this,r={},a=r="source"===this.props.type?this.props.sourceParagraph:this.props.paragraph,n=(a.expression_id,a.manifestation_id),s=a.transcription_id,i=a.manifestations;a.paragraph_text,a.review;var c=[];return i&&i.constructor===Array?c=i.map(function(t){return{manifestation:t,manifestationTitle:t.split("/resource/")[1],transcription:""}}):"string"===typeof i&&(c=[{manifestation:i,manifestationTitle:i.split("/resource/")[1],transcription:""}]),o.a.createElement("div",null,o.a.createElement("p",null,"Context Paragraph"),o.a.createElement("div",{id:"text",ref:"text"},o.a.createElement("div",null)),n&&o.a.createElement("div",{id:"imageWrapperWrapper",className:this.state.imageFocus?"iww-big":"iww-small"},this.state.imageFocus?o.a.createElement("hr",{className:"toggleBar",title:"click to minimize",onClick:this.handleImageWrapperWraperClick}):o.a.createElement("hr",{className:"toggleBar",title:"click to maximize",onClick:this.handleImageWrapperWraperClick}),o.a.createElement(z.a,{manifestations:c,focusedManifestation:n,width:this.state.imageSize})),function(){if(r.expression_id)return o.a.createElement("p",null,o.a.createElement("a",{onClick:e.handleShowFullText},"Show Full Text"))}(),n&&o.a.createElement("p",null,o.a.createElement("a",{href:"http://sctalab.lombardpress.org/#/text?resourceid="+n,target:"_blank"},"View in LbpWeb")),"source"===this.props.type&&this.props.focusedQuotation.id&&o.a.createElement("p",{className:"link",onClick:function(){t.runQueryForSource(t.props.sourceParagraph.expression_id.split("/resource/")[1])}},"Search Quotations of this Passage Only"),n&&o.a.createElement(J.a,{tresourceid:s}))}}]),e}(o.a.Component),rt=Z(function(t){return t})(et),at=r(14).connect,ot=r(157),nt=(r(13),function(t){function e(t){var r;return Object(c.a)(this,e),(r=Object(p.a)(this,Object(l.a)(e).call(this,t))).createBarChart=r.createBarChart.bind(Object(m.a)(r)),r}return Object(h.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){var t=this.props.chart.count;t&&this.createBarChart(t)}},{key:"componentDidUpdate",value:function(t,e){var r=this.props.chart.count;r!=t.chart.count&&this.createBarChart(r)}},{key:"componentWillUnmount",value:function(){ot.selectAll(".tooltip").remove()}},{key:"createBarChart",value:function(t){ot.select("svg").selectAll("*").remove(),ot.selectAll(".tooltip").remove();var e=t;e.filter(function(t,e){t.count=+t.count});var r;r=e.map(function(t){return t.count}),e.map(function(t){return t.title});var a=30,o=30,n=40,s=50,i=500-a-n,c=1200-s-o,u=ot.scale.linear().domain([0,.8*e.length,e.length]).range(["#FFB832","#C61C6F"]),p=ot.scale.linear().domain([0,ot.max(r)]).range([0,i]),l=ot.scale.ordinal().domain(ot.range(0,e.length)).rangeBands([0,c],.5),h=ot.select("body").append("div").attr("class","tooltip").style("position","absolute").style("padding","0 10px").style("background","white").style("opacity",0),f=this.node;ot.select(f).attr("width",c+s+o).attr("height",i+a+n).append("g").attr("transform","translate("+s+", "+a+")").selectAll("rect").data(e).enter().append("g").append("rect").style("fill",function(t,e){return u(e)}).attr("height",0).attr("y",i).attr("width",l.rangeBand()).attr("x",function(t,e){return l(e)}).on("mouseover",function(t){h.transition().style("opacity",.9),h.html("<a href='"+t.item+"'>"+t.title+"</a>. Quoted "+t.count+" times").style("left",ot.event.pageX+0+"px").style("top",ot.event.pageY+0+"px").style("left",ot.select(f).left+150+"px").style("top",ot.select(f).top+125+"px"),ot.select(this).style("opacity",.5)}).on("mouseout",function(t){ot.select(this).transition().style("opacity",1)}).transition().attr("height",function(t){return p(t.count)}).attr("y",function(t){return i-p(t.count)}).delay(function(t,e){return 10*e}).duration(1e3).ease("elastic");var m=ot.scale.linear().domain([0,ot.max(r)]).range([i,0]),d=ot.svg.axis().scale(m).orient("left").ticks(10),T=ot.select(f).append("g");d(T),T.attr("transform","translate("+s+", "+a+")"),T.selectAll("path").style({fill:"none",stroke:"#000"}),T.selectAll("line").style({stroke:"#000"});var E=ot.svg.axis().scale(l).orient("bottom").tickValues(l.domain().filter(function(t,e){return e%50===0})),y=ot.select(f).append("g");E(y),y.attr("transform","translate("+s+", "+(i+a)+")"),y.selectAll("path").style({fill:"none",stroke:"#000"}),y.selectAll("line").style({stroke:"#000"})}},{key:"render",value:function(){var t=this;return o.a.createElement("svg",{ref:function(e){return t.node=e},width:500,height:500})}}]),e}(o.a.Component)),st=at(function(t){return{chart:t.chart}},function(t){return{}})(nt),it=(r(158),r(14).connect),ct=r(13),ut=(r(30),function(t){function e(t){var r;return Object(c.a)(this,e),(r=Object(p.a)(this,Object(l.a)(e).call(this,t))).handleToggleImage=r.handleToggleImage.bind(Object(m.a)(r)),r}return Object(h.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(t){}},{key:"handleToggleImage",value:function(t){t.preventDefault(),(0,this.props.dispatch)(ct.toggleImagesDisplay(this.props.images.visible))}},{key:"render",value:function(){var t=this;return o.a.createElement("div",{className:"images"},o.a.createElement(z.a,{manifestations:[{manifestation:"http://scta.info/resource/l1-cpspfs/reims",manifestationTitle:"reims",transcription:""},{manifestation:"http://scta.info/resource/l1-cpspfs/svict",manifestationTitle:"svict",transcription:""}],focusedManifestation:"http://scta.info/l1-cpspfs/reims"}),function(){var e=t.props.images;if(e.visible&&e.images.length>0)return e.images.map(function(t){var e=t.url;return o.a.createElement("img",{src:e+"/full/1000,/0/default.jpg"})})}())}}]),e}(o.a.Component)),pt=it(function(t){return t})(ut),lt=r(14).connect,ht=r(13),ft=function(t){function e(t){var r;return Object(c.a)(this,e),(r=Object(p.a)(this,Object(l.a)(e).call(this,t))).handleToggleFullText=r.handleToggleFullText.bind(Object(m.a)(r)),r}return Object(h.a)(e,t),Object(u.a)(e,[{key:"componentDidUpdate",value:function(){var t=this,e=new K.default;this.props.fullText.textInfo.text&&e.makeHTML5(this.props.fullText.textInfo.text,function(e){var r=t.props.focusedQuotation.id.split("/").pop(),a=t.props.focusedQuotation.source.split("/").pop();t.refs.text.replaceChild(e,t.refs.text.childNodes[0]);var o="";try{e.querySelector("#"+r)&&e.querySelector("#"+r).setAttribute("class","highlighted"),o=document.getElementById(r).offsetTop}catch(n){e.querySelector("#"+a)&&e.querySelector("#"+a).setAttribute("class","highlighted"),o=document.getElementById(a).offsetTop}console.log("scroll",o),x()(".full-text-wrapper").animate({scrollTop:o-100},400)})}},{key:"handleToggleFullText",value:function(t){t.preventDefault(),(0,this.props.dispatch)(ht.toggleFullTextDisplay(this.props.fullText.visible))}},{key:"render",value:function(){return o.a.createElement("div",{className:"full-text-wrapper"},o.a.createElement("div",{id:"text-tool-bar"},o.a.createElement("button",{id:"hide-full-text",onClick:this.handleToggleFullText},"Hide Text")),o.a.createElement("div",{id:"text",ref:"text"},o.a.createElement("div",null)))}}]),e}(o.a.Component),mt=lt(function(t){return t})(ft),dt=function(t){function e(){return Object(c.a)(this,e),Object(p.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this;return o.a.createElement("div",null,o.a.createElement("div",{className:"wrapper"},o.a.createElement("div",{className:"search column1"},o.a.createElement(g,null)),function(){if(!t.props.chart.visible&&!t.props.images.visible&&!t.props.fullText.visible)return o.a.createElement("div",null,o.a.createElement("div",{id:"quotationsList",className:"column2"},o.a.createElement(w,null)),o.a.createElement("div",{id:"ManifestationQuotationsList",className:"column3"},o.a.createElement(Y,null)),o.a.createElement("div",{className:"column4"},o.a.createElement(rt,null)),o.a.createElement("div",{className:"column5"},o.a.createElement(rt,{type:"source"})))}(),function(){if(t.props.chart.visible)return o.a.createElement("div",{className:"chart"},o.a.createElement(st,{size:[500,500]}))}(),function(){if(t.props.images.visible)return o.a.createElement("div",null,o.a.createElement(pt,null),o.a.createElement("div",{className:"column5"},o.a.createElement(rt,null)))}(),function(){if(t.props.fullText.visible)return o.a.createElement(mt,null)}()))}}]),e}(o.a.Component),Tt=Object(i.connect)(function(t){return t})(dt),Et=function(t){return o.a.createElement("div",null,o.a.createElement("h3",{className:"page-title"},o.a.createElement("em",null,"Ad fontes"),": A Scholastic Quotation Explorer"),o.a.createElement("div",{className:"page-header"},o.a.createElement("p",null,"A ",o.a.createElement("a",{href:"http://lombardpress.org"},"LombardPress")," Publication"),o.a.createElement("p",null,"Powerd by Data from the ",o.a.createElement("a",{href:"https://scta.info"},"Scholastic Commentaries and Text Archive")),o.a.createElement("p",null,"Designed by ",o.a.createElement("a",{href:"http://jeffreycwitt.com"},"Jeffrey C. Witt"))),o.a.createElement(Tt,null))},yt=r(13),Ot=(r(159),r(160),r(164).configure());Ot.subscribe(function(){Ot.getState()}),Ot.dispatch(Object(yt.setSearchParameters)({})),Ot.dispatch(Object(yt.fetchQuotationAuthors)()),Ot.dispatch(Object(yt.fetchExpressionAuthors)()),Ot.dispatch(Object(yt.fetchSearchWorksList)()),Ot.dispatch(Object(yt.fetchExpressionTypes)()),Ot.dispatch(Object(yt.fetchQuotationExpressionTypes)()),Ot.dispatch(Object(yt.fetchQuotationWorksList)()),Ot.dispatch(Object(yt.fetchWorkGroups)()),Ot.dispatch(Object(yt.fetchAuthorTypes)()),Ot.dispatch(Object(yt.fetchChart)()),s.a.render(o.a.createElement(i.Provider,{store:Ot},o.a.createElement(Et,null)),document.getElementById("root"))},164:function(t,e,r){"use strict";r.r(e);var a=r(15);function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function n(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(r,!0).forEach(function(e){Object(a.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"CLEAR_SEARCH_PARAMETERS":return n({},t,{searchParameters:[]});case"SET_SEARCH_PARAMETERS":return n({},t,{searchParameters:e.searchParameters});case"START_SEARCH_WORKS_FETCH":return n({},t,{searchWorks:[]});case"COMPLETE_SEARCH_WORKS_FETCH":return n({},t,{searchWorks:e.listOfWorks});case"START_QUOTATION_AUTHORS_FETCH":return n({},t,{quotationAuthors:[]});case"COMPLETE_QUOTATION_AUTHORS_FETCH":return n({},t,{quotationAuthors:e.authors});case"START_EXPRESSION_AUTHORS_FETCH":return n({},t,{expressionAuthors:[]});case"COMPLETE_EXPRESSION_AUTHORS_FETCH":return n({},t,{expressionAuthors:e.authors});case"START_QUOTATION_WORKS_LIST_FETCH":return n({},t,{quotationWorksList:[]});case"COMPLETE_QUOTATION_WORKS_LIST_FETCH":return n({},t,{quotationWorksList:e.quotationWorksList});case"START_QUOTATION_WORK_PARTS_FETCH":return n({},t,{quotationWorkParts:[]});case"COMPLETE_QUOTATION_WORK_PARTS_FETCH":return n({},t,{quotationWorkParts:e.parts});case"START_EXPRESSION_PARTS_FETCH":return n({},t,{expressionParts:[]});case"COMPLETE_EXPRESSION_PARTS_FETCH":return n({},t,{expressionParts:e.parts});case"START_EXPRESSION_TYPE_FETCH":return n({},t,{expressionTypes:[]});case"COMPLETE_EXPRESSION_TYPE_FETCH":return n({},t,{expressionTypes:e.expressionTypes});case"START_QUOTATION_EXPRESSION_TYPE_FETCH":return n({},t,{quotationExpressionTypes:[]});case"COMPLETE_QUOTATION_EXPRESSION_TYPE_FETCH":return n({},t,{quotationExpressionTypes:e.quotationExpressionTypes});case"START_WORK_GROUPS_FETCH":return n({},t,{workGroups:[]});case"COMPLETE_WORK_GROUPS_FETCH":return n({},t,{workGroups:e.workGroups});case"START_AUTHOR_TYPES_FETCH":return n({},t,{authorTypes:[]});case"COMPLETE_AUTHOR_TYPES_FETCH":return n({},t,{authorTypes:e.authorTypes});default:return t}};function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(r,!0).forEach(function(e){Object(a.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"TOGGLE_GRAPH_DISPLAY":return c({},t,{visible:!e.current});case"START_CHART_FETCH":return c({},t,{count:[]});case"COMPLETE_CHART_FETCH":return c({},t,{count:e.count});default:return t}};function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(r,!0).forEach(function(e){Object(a.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"TOGGLE_IMAGES_DISPLAY":return l({},t,{visible:!e.current});case"START_IMAGES_FETCH":return l({},t,{images:[]});case"COMPLETE_IMAGES_FETCH":return l({},t,{images:e.images});default:return t}},f=r(19);function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(r,!0).forEach(function(e){Object(a.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var T=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_QUOTATIONS":case"ADD_QUOTATIONS":return[].concat(Object(f.a)(t),Object(f.a)(e.quotations));case"CLEAR_QUOTATIONS":return[];case"START_QUOTATIONS_FETCH":return"fetching";case"COMPLETE_QUOTATIONS_FETCH":return e.quotations.map(function(t){return{id:t.quotation.value,quotation:t.quotation_text.value,title:t.toplevel_expression_title.value,author:t.author_title.value,focused:!1,isInstanceOf:t.isInstanceOf?t.isInstanceOf.value:null,source:t.source?t.source.value:null,citation:t.citation?t.citation.value:null,refText:t.refText?t.refText.value:null,refType:t.refType?t.refType.value.split("/resource/").reverse()[0]:null}});case"CHANGE_QUOTATIONS_FOCUS":var r=t.map(function(t){return t.id===e.id?d({},t,{focused:!0}):d({},t,{focused:!1})});return Object(f.a)(r);default:return t}},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"CREATE_FOCUSED_QUOTATION":return e.quotation;case"CLEAR_FOCUSED_QUOTATION":return{};default:return t}},y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"CREATE_CANONICAL_QUOTATION":return e.quotation;case"CLEAR_CANONICAL_QUOTATION":return null;default:return t}};function O(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?O(r,!0).forEach(function(e){Object(a.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var A=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_CANONICAL_QUOTATIONS":return[].concat(Object(f.a)(t),Object(f.a)(e.quotations));case"CLEAR_CANONICAL_QUOTATIONS":case"START_CANONICAL_QUOTATIONS_FETCH":return[];case"COMPLETE_CANONICAL_QUOTATIONS_FETCH":return e.canonicalQuotations.map(function(t){return{id:t.quotation.value,quotation:t.quotation_text.value,citation:t.citation?t.citation.value:"citation not yet recorded",focused:!1}});case"CLEAR_CANONICAL_QUOTATIONS_FOCUS":return t.map(function(t){return v({},t,{focused:!1})});case"CHANGE_CANONICAL_QUOTATIONS_FOCUS":var r=t.map(function(t){return t.id===e.id?v({},t,{focused:!0}):v({},t,{focused:!1})});return Object(f.a)(r);default:return t}};function _(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function g(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_(r,!0).forEach(function(e){Object(a.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var P=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_MANIFESTATION_QUOTATIONS":return[].concat(Object(f.a)(t),Object(f.a)(e.quotations));case"CLEAR_MANIFESTATION_QUOTATIONS":case"START_MANIFESTATION_QUOTATIONS_FETCH":return[];case"COMPLETE_MANIFESTATION_QUOTATIONS_FETCH":return e.manifestationQuotations.map(function(t){return{id:t.quotation.value,quotation:t.quotation_text.value,focused:!1,isManifestationOf:t.isManifestationOf?t.isManifestationOf.value:null}});case"CLEAR_MANIFESTATION_QUOTATIONS_FOCUS":return t.map(function(t){return g({},t,{focused:!1})});case"CHANGE_MANIFESTATION_QUOTATIONS_FOCUS":var r=t.map(function(t){return t.id===e.id?g({},t,{focused:!0}):g({},t,{focused:!1})});return Object(f.a)(r);default:return t}};function x(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?x(r,!0).forEach(function(e){Object(a.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var S=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_PARAGRAPH":return e.paragraph;case"CLEAR_PARAGRAPH":case"START_PARAGRAPH_FETCH":return{};case"COMPLETE_PARAGRAPH_FETCH":return e.paragraph;case"START_REVIEW_FETCH":return t;case"COMPLETE_REVIEW_FETCH":return b({},t,{review:e.review});default:return t}};function C(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function I(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?C(r,!0).forEach(function(e){Object(a.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):C(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var q=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_SOURCE_PARAGRAPH":return e.sourceParagraph;case"CLEAR_SOURCE_PARAGRAPH":case"START_SOURCE_PARAGRAPH_FETCH":return{};case"COMPLETE_SOURCE_PARAGRAPH_FETCH":return e.sourceParagraph;case"START_SOURCE_PARAGRAPH_REVIEW_FETCH":return t;case"COMPLETE_SOURCE_PARAGRAPH_REVIEW_FETCH":return I({},t,{review:e.review});default:return t}};function w(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function R(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?w(r,!0).forEach(function(e){Object(a.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var k=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"TOGGLE_FULL_TEXT_DISPLAY":return R({},t,{visible:!e.current});case"ADD_FULL_TEXT":return R({},t,{textInfo:e.text});case"CLEAR_FULL_TEXT":case"START_FULL_TEXT_FETCH":return R({},t,{textInfo:{}});case"COMPLETE_FULL_TEXT_FETCH":return R({},t,{textInfo:e.text});default:return t}};r.d(e,"configure",function(){return L});var N=r(40),j=r(161).default,L=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=N.combineReducers({search:s,quotations:T,focusedQuotation:E,canonicalQuotation:y,canonicalQuotations:A,manifestationQuotations:P,paragraph:S,sourceParagraph:q,chart:u,images:h,fullText:k}),r=N.createStore(e,t,N.compose(N.applyMiddleware(j),window.devToolsExtension?window.devToolsExtension():function(t){return t}));return r}},30:function(t,e,r){"use strict";r.r(e);var a=r(5),o=r(6),n=r(105),s=function(){function t(e){if(Object(a.a)(this,t),this.els=[],this.behaviors=[],this.hasStyle=!1,this.prefixes=[],e)this.base=e;else try{window&&(this.base=window.location.href.replace(/\/[^\/]*$/,"/"))}catch(r){this.base=""}this.behaviors.push(n),this.supportsShadowDom=document.head.createShadowRoot||document.head.attachShadow}return Object(o.a)(t,[{key:"getHTML5",value:function(t,e,r){var a=this;return window.location.href.startsWith(this.base)&&t.indexOf("/")>=0&&(this.base=t.replace(/\/[^\/]*$/,"/")),new Promise(function(e,r){var a=new XMLHttpRequest;a.open("GET",t),a.send(),a.onload=function(){this.status>=200&&this.status<300?e(this.response):r(this.statusText)},a.onerror=function(){r(this.statusText)}}).catch(function(t){console.log(t)}).then(function(t){return a.makeHTML5(t,e,r)})}},{key:"makeHTML5",value:function(t,e,r){var a=(new DOMParser).parseFromString(t,"text/xml"),o=this.domToHTML5(a,e,r);return this.registerTEIElements(o,e)}},{key:"domToHTML5",value:function(t,e,r){var a=this;this._fromTEI(t);return this.dom=function t(e){var o,n=!1;switch(e.namespaceURI){case"http://www.tei-c.org/ns/1.0":o=document.createElement("tei-"+e.tagName);break;case"http://www.tei-c.org/ns/Examples":if("egXML"==e.tagName){o=document.createElement("teieg-"+e.tagName);break}case"http://relaxng.org/ns/structure/1.0":o=document.createElement("rng-"+e.tagName);break;default:o=document.importNode(e,!1),n=!0}for(var s=0,i=Array.from(e.attributes);s<i.length;s++){var c=i[s];!c.name.startsWith("xmlns")||n?o.setAttribute(c.name,c.value):"xmlns"==c.name&&o.setAttribute("data-xmlns",c.value),"xml:id"!=c.name||n||o.setAttribute("id",c.value),"xml:lang"!=c.name||n||o.setAttribute("lang",c.value),"rendition"==c.name&&o.setAttribute("class",c.value.replace(/#/g,""))}if(o.setAttribute("data-teiname",e.localName),0==e.childNodes.length&&o.setAttribute("data-empty",""),"tagsDecl"==e.localName){for(var u=document.createElement("style"),p=0,l=Array.from(e.childNodes);p<l.length;p++){var h=l[p];if(h.nodeType==Node.ELEMENT_NODE&&"rendition"==h.localName&&"css"==h.getAttribute("scheme")){var f="";h.hasAttribute("selector")?(f+=h.getAttribute("selector").replace(/([^#, >]+\w*)/g,"tei-$1").replace(/#tei-/g,"#")+"{\n",f+=h.textContent):(f+="."+h.getAttribute("xml:id")+"{\n",f+=h.textContent),f+="\n}\n",u.appendChild(document.createTextNode(f))}}u.childNodes.length>0&&(o.appendChild(u),a.hasStyle=!0)}"prefixDef"==e.localName&&(a.prefixes.push(e.getAttribute("ident")),a.prefixes[e.getAttribute("ident")]={matchPattern:e.getAttribute("matchPattern"),replacementPattern:e.getAttribute("replacementPattern")});for(var m=0,d=Array.from(e.childNodes);m<d.length;m++){var T=d[m];T.nodeType==Node.ELEMENT_NODE?o.appendChild(t(T)):o.appendChild(T.cloneNode())}return r&&r(o),o}(t.documentElement)}},{key:"registerTEIElements",value:function(t,e){if(t.registerElement?this.registerAll(this.els):this.fallback(this.els),this.done=!0,!e)return this.dom;e(this.dom,this)}},{key:"addStyle",value:function(t,e){this.hasStyle&&t.getElementsByTagName("head").item(0).appendChild(e.getElementsByTagName("style").item(0).cloneNode(!0))}},{key:"addShadowStyle",value:function(t){this.shadowCSS&&(t.innerHTML='<style>@import url("'+this.shadowCSS+'");</style>'+t.innerHTML)}},{key:"addBehaviors",value:function(t){t.handlers||t.fallbacks?this.behaviors.push(t):console.log("No handlers or fallback methods found.")}},{key:"setBaseUrl",value:function(t){this.base=t}},{key:"_fromTEI",value:function(t){var e=t.documentElement;this.els=new Set(Array.from(e.getElementsByTagNameNS("http://www.tei-c.org/ns/1.0","*"),function(t){return t.tagName})),this.els.add("egXML"),this.els.add(e.tagName)}},{key:"_insert",value:function(t,e){var r=document.createElement("span");return e.length>1?e[0].includes("<")&&e[1].includes("</")?r.innerHTML=e[0]+t.innerHTML+e[1]:r.innerHTML="<span>"+e[0]+"</span>"+t.innerHTML+"<span>"+e[1]+"</span>":e[0].includes("<")?r.innerHTML=e[0]+t.innerHTML:r.innerHTML="<span>"+e[0]+"</span>"+t.innerHTML,r.children.length>1?r:r.children[0]}},{key:"_template",value:function(t,e){var r=t;if(t.search(/$(\w*)@(\w+)/))for(var a,o=/\$(\w*)@(\w+)/g;a=o.exec(t);)e.hasAttribute(a[2])&&(r=a[1]&&this[a[1]]?r.replace(a[0],this[a[1]].call(this,e.getAttribute(a[2]))):r.replace(a[0],e.getAttribute(a[2])));return r}},{key:"tagName",value:function(t){return"egXML"==t?"teieg-"+t:"tei-"+t}},{key:"decorator",value:function(t){var e=this;return function(r){for(var a=[],o=0;o<t.length;o++)a.push(e._template(t[o],r));return e._insert(r,a)}}},{key:"getHandler",value:function(t){for(var e=this.behaviors.length-1;e>=0;e--)if(this.behaviors[e].handlers[t])return Array.isArray(this.behaviors[e].handlers[t])?this.append(this.decorator(this.behaviors[e].handlers[t])):this.append(this.behaviors[e].handlers[t])}},{key:"getFallback",value:function(t){for(var e=this.behaviors.length-1;e>=0;e--)if(this.behaviors[e].handlers[t])return Array.isArray(this.behaviors[e].handlers[t])?this.decorator(this.behaviors[e].handlers[t]):this.behaviors[e].handlers[t]}},{key:"append",value:function(t,e){if(!e){var r=this;return this.supportsShadowDom?function(){var e=t.call(r,this);e&&r._appendShadow(this,e)}:function(){var e=t.call(r,this);e&&!this.querySelector(":scope > "+e.nodeName)&&r._appendBasic(this,e)}}var a=t.call(this,e);a&&!e.querySelector(":scope > "+a.nodeName)&&(this.supportsShadowDom?this._appendShadow(e,a):this._appendBasic(e,a))}},{key:"_appendShadow",value:function(t,e){var r=t.attachShadow({mode:"open"});this.addShadowStyle(r),r.appendChild(e)}},{key:"_appendBasic",value:function(t,e){this.hideContent(t),t.appendChild(e)}},{key:"registerAll",value:function(t){var e=!0,r=!1,a=void 0;try{for(var o,n=t[Symbol.iterator]();!(e=(o=n.next()).done);e=!0){var s=o.value,i=Object.create(HTMLElement.prototype),c=this.getHandler(s);c&&(i.createdCallback=c);var u=this.tagName(s);try{document.registerElement(u,{prototype:i})}catch(p){console.log(u+" couldn't be registered or is already registered."),console.log(p)}}}catch(l){r=!0,a=l}finally{try{e||null==n.return||n.return()}finally{if(r)throw a}}}},{key:"fallback",value:function(t){var e=!0,r=!1,a=void 0;try{for(var o,n=t[Symbol.iterator]();!(e=(o=n.next()).done);e=!0){var s=o.value,i=this.getFallback(s);if(i)for(var c=0,u=Array.from(this.dom.getElementsByTagName(this.tagName(s)));c<u.length;c++){var p=u[c];this.append(i,p)}}}catch(l){r=!0,a=l}finally{try{e||null==n.return||n.return()}finally{if(r)throw a}}}},{key:"rw",value:function(t){return t.match(/^(?:http|mailto|file|\/|#).*$/)?t:this.base+t}},{key:"first",value:function(t){return t.replace(/ .*$/,"")}},{key:"serialize",value:function(t,e){var r="";if(!e){r+="&lt;"+t.getAttribute("data-teiname");for(var a=0,o=Array.from(t.attributes);a<o.length;a++){var n=o[a];n.name.startsWith("data-")||["id","lang","class"].includes(n.name)||(r+=" "+n.name+'="'+n.value+'"'),"data-xmlns"==n.name&&(r+=' xmlns="'+n.value+'"')}t.childNodes.length>0?r+=">":r+="/>"}for(var s=0,i=Array.from(t.childNodes);s<i.length;s++){var c=i[s];switch(c.nodeType){case Node.ELEMENT_NODE:r+=this.serialize(c);break;case Node.PROCESSING_INSTRUCTION_NODE:r+="&lt;?"+c.nodeValue+"?>";break;case Node.COMMENT_NODE:r+="&lt;!--"+c.nodeValue+"--\x3e";break;default:r+=c.nodeValue.replace(/</g,"&lt;")}}return!e&&t.childNodes.length>0&&(r+="&lt;/"+t.getAttribute("data-teiname")+">"),r}},{key:"hideContent",value:function(t){if(t.childNodes.length>0){var e=t.innerHTML;t.innerHTML="";var r=document.createElement("span");r.setAttribute("style","display:none;"),r.setAttribute("class","hide"),r.innerHTML=e,t.appendChild(r)}}},{key:"unEscapeEntities",value:function(t){return t.replace(/&gt;/,">").replace(/&quot;/,'"').replace(/&apos;/,"'").replace(/&amp;/,"&")}},{key:"savePosition",value:function(){localStorage.setItem("scroll",window.scrollY)}},{key:"restorePosition",value:function(){localStorage.getItem("scroll")&&window.scrollTo(0,localStorage.getItem("scroll"))}},{key:"fromODD",value:function(){}}]),t}();try{window&&(window.CETEI=s,window.unload=s.savePosition,window.load=s.restorePosition)}catch(i){}e.default=s},68:function(t,e,r){t.exports=r(162)}},[[68,1,2]]]);
//# sourceMappingURL=main.52dab106.chunk.js.map